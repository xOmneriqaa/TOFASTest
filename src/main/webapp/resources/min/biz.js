
angular.module("tfDeveloperApp",["tfDeveloperController","tfDeveloperServices"]).config(["$stateProvider",function(a){a.state("tfDeveloper",{url:"/tf-developer/",templateUrl:"/ng/view/tf-developer/index.html",data:{isDeveloper:!0}}).state("tfDeveloper.info",{url:"info",templateUrl:"/ng/view/tf-developer/info.html",controller:"tfDeveloperInfoController"}).state("tfDeveloper.entities",{url:"entities",templateUrl:"/ng/view/tf-developer/entities.html",controller:"tfDeveloperEntitiesController"}).state("tfDeveloper.controllers",{url:"controllers",templateUrl:"/ng/view/tf-developer/controllers.html",controller:"tfDeveloperControllersController"}).state("tfDeveloper.services",{url:"services",templateUrl:"/ng/view/tf-developer/services.html",controller:"tfDeveloperServicesController"}).state("tfDeveloper.repositories",{url:"repositories",templateUrl:"/ng/view/tf-developer/repositories.html",controller:"tfDeveloperRepositoriesController"}).state("tfDeveloper.dbLogs",{url:"db-logs",templateUrl:"/ng/view/tf-developer/db-logs.html",controller:"tfDeveloperDbLogsController"}).state("tfDeveloper.roles",{url:"roles",templateUrl:"/ng/view/tf-developer/roles/index.html",controller:"tfDeveloperRolesController"}).state("tfDeveloper.roles.new",{url:"/new",templateUrl:"/ng/view/tf-developer/roles/new.html",controller:"tfDeveloperRolesNewController"}).state("tfDeveloper.roles.edit",{url:"/:id",templateUrl:"/ng/view/tf-developer/roles/edit.html",controller:"tfDeveloperRolesEditController"}).state("tfDeveloper.auths",{url:"auths",templateUrl:"/ng/view/tf-developer/auths/index.html",controller:"tfDeveloperAuthsController"}).state("tfDeveloper.auths.new",{url:"/new",templateUrl:"/ng/view/tf-developer/auths/new.html",controller:"tfDeveloperAuthsNewController"}).state("tfDeveloper.auths.edit",{url:"/:id",templateUrl:"/ng/view/tf-developer/auths/edit.html",controller:"tfDeveloperAuthsEditController"}).state("tfDeveloper.params",{url:"params",templateUrl:"/ng/view/tf-developer/params/index.html",controller:"tfDeveloperParamsController"}).state("tfDeveloper.params.new",{url:"/new",templateUrl:"/ng/view/tf-developer/params/new.html",controller:"tfDeveloperParamsNewController"}).state("tfDeveloper.params.edit",{url:"/:id",templateUrl:"/ng/view/tf-developer/params/edit.html",controller:"tfDeveloperParamsEditController"}).state("tfDeveloper.console",{url:"console",templateUrl:"/ng/view/tf-developer/console.html",controller:"tfDeveloperConsoleController"})}]);

var tfDeveloperInfoController=function(a,b){b.get("/tf-developer/api/list-all-parameters").success(function(b){a.allParams=b})};tfDeveloperInfoController.$inject=["$scope","$http"];var tfDeveloperEntitiesController=function(a,b){b.get("/tf-developer/api/list-entities").success(function(b){a.entities=b})};tfDeveloperEntitiesController.$inject=["$scope","$http"];var tfDeveloperControllersController=function(a,b){b.get("/tf-developer/api/list-controllers").success(function(b){a.controllers=[];for(var c in b){var d=b[c],f=-1,l;for(l in d.urlMappings){var m=d.urlMappings[l];f++;var h=-1,n;for(n in d.methodInfos){var k=d.methodInfos[n];h++;var g=-1,p;for(p in k.urlMappings){var q=k.urlMappings[p];g++;a.controllers.push({className:d.className,controllerMap:m,methodName:k.methodName,methodMap:q,fullMap:m+q,isFirstControllerMap:0==f&&0==h&&0==g,isFirstMethodMap:0==h&&0==g,isFirstMethod:0==g})}}}}})};tfDeveloperControllersController.$inject=["$scope","$http"];var tfDeveloperServicesController=function(a,b){b.get("/tf-developer/api/list-services").success(function(b){a.services=b})};tfDeveloperServicesController.$inject=["$scope","$http"];var tfDeveloperRepositoriesController=function(a,b){b.get("/tf-developer/api/list-repositories").success(function(b){a.repositories=b})};tfDeveloperRepositoriesController.$inject=["$scope","$http"];var tfDeveloperDbLogsController=function(a,b,e,c){a.gridOptions={autoBind:!1,dataSource:{type:"json",transport:{read:function(d){b.post(c,a.searchParams).success(function(a){d.success(a)})}},pageSize:10},columns:[{field:"exceptionId",title:"{{'exceptionId'| translate}}",filterable:{multi:!0}},{field:"exceptionLevel",title:"{{'exceptionLevel'| translate}}",filterable:{multi:!0}},{field:"exceptionName",title:"{{'exceptionName'| translate}}",filterable:{multi:!0}},{field:"exceptionUrl",title:"{{'exceptionUrl'| translate}}",filterable:{multi:!0}},{field:"insertedBy",title:"{{'insertedBy'| translate}}",filterable:{multi:!0}},{field:"insertedDate",title:"{{'insertedDate'| translate}}",filterable:{multi:!0}}]};a.searchParams={};a.getDbLogs=function(){a.tfDbLogs.dataSource.read()}};tfDeveloperDbLogsController.$inject=["$scope","$http","$modal","DEV_DB_LOGS"];var tfDeveloperRolesController=function(a,b,e,c,d){return d(a,b,c,e)};tfDeveloperRolesController.$inject=["$scope","$state","$modal","tfAppRoleFactory","tfBaseCrudListController"];var tfDeveloperRolesNewController=function(a,b,e,c){return c(a,b,e,{},"tfDeveloper.roles")};tfDeveloperRolesNewController.$inject=["$scope","$state","tfAppRoleFactory","tfBaseCrudNewController"];var tfDeveloperRolesEditController=function(a,b,e,c,d){return c(a,b,e,{id:d.id},"tfDeveloper.roles")};tfDeveloperRolesEditController.$inject=["$scope","$state","tfAppRoleFactory","tfBaseCrudEditController","$stateParams"];var tfDeveloperAuthsController=function(a,b,e,c,d){return d(a,b,c,e)};tfDeveloperAuthsController.$inject=["$scope","$state","$modal","tfAppAuthFactory","tfBaseCrudListController"];var tfDeveloperAuthsNewController=function(a,b,e,c,d){angular.extend(a,{roles:[],getRoles:function(){a.roles=d.query()}});a.getRoles();return c(a,b,e,{},"tfDeveloper.auths")};tfDeveloperAuthsNewController.$inject=["$scope","$state","tfAppAuthFactory","tfBaseCrudNewController","tfAppRoleFactory"];var tfDeveloperAuthsEditController=function(a,b,e,c,d,f){angular.extend(a,{roles:[],getRoles:function(){a.roles=f.query()}});a.getRoles();return c(a,b,e,{id:d.id},"tfDeveloper.auths")};tfDeveloperAuthsEditController.$inject="$scope $state tfAppAuthFactory tfBaseCrudEditController $stateParams tfAppRoleFactory".split(" ");var tfDeveloperParamsController=function(a,b,e,c,d){return d(a,b,c,e)};tfDeveloperParamsController.$inject=["$scope","$state","$modal","tfAppParamFactory","tfBaseCrudListController"];var tfDeveloperParamsNewController=function(a,b,e,c){return c(a,b,e,{},"tfDeveloper.params")};tfDeveloperParamsNewController.$inject=["$scope","$state","tfAppParamFactory","tfBaseCrudNewController"];var tfDeveloperParamsEditController=function(a,b,e,c,d){return c(a,b,e,{id:d.id},"tfDeveloper.params")};tfDeveloperParamsEditController.$inject=["$scope","$state","tfAppParamFactory","tfBaseCrudEditController","$stateParams"];var tfDeveloperConsoleController=function(a,b,e,c){a.logs=[];a.toggleCapture=function(){b.get("/tf-developer/api/console/toggle-capture").success(function(b){b&&a.refreshStatus()})};a.refreshStatus=function(){b.get("/tf-developer/api/console/status").success(function(b){a.status=b;a.status.capturing&&a.refreshLogs()})};a.refreshLogs=function(){b.get("/tf-developer/api/console/logs").success(function(b){b&&(1==b.length&&-1==+b[0]||angular.forEach(b,function(b,c){a.logs.unshift({value:b})}),"tfDeveloper.console"==c.$current.name&&a.status.capturing&&e(a.refreshLogs,5E3,1))})};a.changeLevel=function(c){b.post("/tf-developer/api/console/change-level",c).success(function(b){b&&a.refreshStatus()})};a.getClassFromLogLevel=function(){if(a.status)return a.status.error?"label label-danger":a.status.warning?"label label-warning":a.status.info?"label label-info":a.status.debug?"label label-primary":"label label-default"};a.clearConsole=function(){a.logs=[]};a.strFilter="";a.refreshStatus()};tfDeveloperConsoleController.$inject=["$scope","$http","$interval","$state"];angular.module("tfDeveloperController",[]).controller("tfDeveloperInfoController",tfDeveloperInfoController).controller("tfDeveloperEntitiesController",tfDeveloperEntitiesController).controller("tfDeveloperControllersController",tfDeveloperControllersController).controller("tfDeveloperServicesController",tfDeveloperServicesController).controller("tfDeveloperRepositoriesController",tfDeveloperRepositoriesController).controller("tfDeveloperDbLogsController",tfDeveloperDbLogsController).controller("tfDeveloperRolesController",tfDeveloperRolesController).controller("tfDeveloperRolesNewController",tfDeveloperRolesNewController).controller("tfDeveloperRolesEditController",tfDeveloperRolesEditController).controller("tfDeveloperAuthsController",tfDeveloperAuthsController).controller("tfDeveloperAuthsNewController",tfDeveloperAuthsNewController).controller("tfDeveloperAuthsEditController",tfDeveloperAuthsEditController).controller("tfDeveloperParamsController",tfDeveloperParamsController).controller("tfDeveloperParamsNewController",tfDeveloperParamsNewController).controller("tfDeveloperParamsEditController",tfDeveloperParamsEditController).controller("tfDeveloperConsoleController",tfDeveloperConsoleController);

var tfAppRoleFactory=function(a,b){return a(b+"/:id",{id:"@id"},{update:{method:"PUT"}})};tfAppRoleFactory.$inject=["$resource","DEV_API_ROLES"];var tfAppAuthFactory=function(a,b){return a(b+"/:id",{id:"@id"},{update:{method:"PUT"}})};tfAppAuthFactory.$inject=["$resource","DEV_API_AUTHS"];var tfAppParamFactory=function(a,b){return a(b+"/:id",{id:"@id"},{update:{method:"PUT"}})};tfAppParamFactory.$inject=["$resource","DEV_API_PARAMS"];angular.module("tfDeveloperServices",["ngResource"]).factory("tfAppRoleFactory",tfAppRoleFactory).factory("tfAppAuthFactory",tfAppAuthFactory).factory("tfAppParamFactory",tfAppParamFactory);

angular.module("tfAdminApp",["tfAdminController","tfAdminServices","ykyAdminApp"]).config(["$stateProvider",function(a){a.state("tfAdmin",{url:"/tf-admin/",templateUrl:"/ng/view/tf-admin/index.html",data:{roles:["TFG_YKY_ADMIN","TFG_YKY_DURATION_DEF","TFG_YKY_PRESS_USER"]},ncyBreadcrumb:{label:"{{'admin'|translate}}"}}).state("tfAdmin.appParams",{url:"app-params/",templateUrl:"/ng/view/tf-developer/params/index.html",controller:"tfAdminParamsController"}).state("tfAdmin.appParams.edit",{url:":id",templateUrl:"/ng/view/tf-developer/params/edit.html",controller:"tfAdminParamsEditController"}).state("tfAdmin.announcements",{url:"announcements/",templateUrl:"/ng/view/tf-admin/tf-announcements/index.html",controller:"tfAdminAnnouncementsController"}).state("tfAdmin.announcements.new",{url:"new/",templateUrl:"/ng/view/tf-admin/tf-announcements/new.html",controller:"tfAdminAnnouncementsNewController"}).state("tfAdmin.announcements.view",{url:"view/:id",templateUrl:"/ng/view/tf-admin/tf-announcements/view.html",controller:"tfAdminAnnouncementViewController"}).state("tfAdmin.announcements.edit",{url:"edit/:id",templateUrl:"/ng/view/tf-admin/tf-announcements/edit.html",controller:"tfAdminAnnouncementsEditController"})}]);

var tfAdminParamsController=function(b,a,c,d,e){return e(b,a,d,c)};tfAdminParamsController.$inject=["$scope","$state","$modal","tfAdminAppParamFactory","tfBaseCrudListController"];var tfAdminParamsEditController=function(b,a,c,d,e){return d(b,a,c,{id:e.id},"tfAdmin.appParams")};tfAdminParamsEditController.$inject=["$scope","$state","tfAdminAppParamFactory","tfBaseCrudEditController","$stateParams"];var tfAdminAnnouncementUploadOptions={saveUrl:"/tf-admin/api/announcements/upload",removeUrl:"/tf-admin/api/announcements/delete-cached",autoUpload:!0},tfAdminAnnouncementRoleOptions={dataTextField:"name",dataValueField:"id",dataSource:{type:"json",transport:{read:{url:"/tf-admin/api/announcements/list-roles"}}}},tfAdminAnnouncementsController=function(b,a,c,d,e){return e(b,a,d,c)};tfAdminAnnouncementsController.$inject=["$scope","$state","$modal","tfAdminAnnouncementFactory","tfBaseCrudListController"];var tfAdminAnnouncementsNewController=function(b,a,c,d,e){angular.extend(b,{roleOptions:tfAdminAnnouncementRoleOptions,uploadOptions:tfAdminAnnouncementUploadOptions,onUpload:function(b){console.log("upload triggered");var a=b.XMLHttpRequest;a&&a.addEventListener("readystatechange",function(b){1==a.readyState&&a.setRequestHeader("X-CSRF-TOKEN",e.getCsrfToken())})}});return d(b,a,c,{},"tfAdmin.announcements")};tfAdminAnnouncementsNewController.$inject=["$scope","$state","tfAdminAnnouncementFactory","tfBaseCrudNewController","tfAuthService"];var tfAdminAnnouncementsEditController=function(b,a,c,d,e,f,g,h){angular.extend(b,{roleOptions:tfAdminAnnouncementRoleOptions,confirmAttachmentDelete:function(a){f.open({templateUrl:"/ng/view/common/delete-modal-yes-no.html",controller:"deleteModalYesNoController",resolve:{deletedItem:function(){return a}}}).result.then(function(a){b.deleteAttachment(a)},function(){console.log("attachment deletion is canceled")})},deleteAttachment:function(b){g.post("/tf-admin/api/announcements/delete",b).success(function(b){b&&a.reload()})},uploadOptions:tfAdminAnnouncementUploadOptions,onUpload:function(b){console.log("upload triggered");var a=b.XMLHttpRequest;a&&a.addEventListener("readystatechange",function(b){1==a.readyState&&a.setRequestHeader("X-CSRF-TOKEN",h.getCsrfToken())})}});return d(b,a,c,{id:e.id},"tfAdmin.announcements")};tfAdminAnnouncementsEditController.$inject="$scope $state tfAdminAnnouncementFactory tfBaseCrudEditController $stateParams $modal $http tfAuthService".split(" ");var tfAdminAnnouncementViewController=function(b,a,c,d){b.item={};d.get({id:c.id},function(a){b.item=a})};tfAdminAnnouncementViewController.$inject=["$scope","$state","$stateParams","tfAdminAnnouncementFactory"];angular.module("tfAdminController",["ngCookies"]).controller("tfAdminParamsController",tfAdminParamsController).controller("tfAdminParamsEditController",tfAdminParamsEditController).controller("tfAdminAnnouncementsController",tfAdminAnnouncementsController).controller("tfAdminAnnouncementViewController",tfAdminAnnouncementViewController).controller("tfAdminAnnouncementsNewController",tfAdminAnnouncementsNewController).controller("tfAdminAnnouncementsEditController",tfAdminAnnouncementsEditController);

var tfAdminAppParamFactory=function(a,b){return a(b+"/:id",{id:"@id"},{update:{method:"PUT"}})};tfAdminAppParamFactory.$inject=["$resource","ADM_PRMS"];var tfAdminAnnouncementFactory=function(a,b){return a(b+"/:id",{id:"@id"},{update:{method:"PUT"}})};tfAdminAnnouncementFactory.$inject=["$resource","ADM_ANS"];angular.module("tfAdminServices",["ngResource","tfConstants"]).factory("tfAdminAppParamFactory",tfAdminAppParamFactory).factory("tfAdminAnnouncementFactory",tfAdminAnnouncementFactory);

angular.module("tfAnnouncementApp",["tfAnnouncementsControllers"]).config(["$stateProvider",function(a){a.state("tfAnnouncementList",{url:"/tf-announcements",templateUrl:"/ng/view/tf-announcements/index.html",controller:"tfAnnouncementsIndexController"}).state("tfAnnouncementList.view",{url:"/:id",templateUrl:"/ng/view/tf-announcements/view.html",controller:"tfAnnouncementsViewController"})}]);

var tfAnnouncementsIndexController=function(a,c){a.announcements=function(){return c.announcements};a.getClassForAnnouncement=function(a){var b="list-group-item ";a.read||(b+=" list-group-item-info ");return b};a.forceToCheckAnnouncements=function(){c.forceRefresh()}};tfAnnouncementsIndexController.$inject=["$scope","tfAnnouncementService"];var tfAnnouncementsViewController=function(a,c,d,b){a.selectedAnnouncement=b.getFromId(c.id);b.markAsRead(a.selectedAnnouncement);a.selectedAnnouncementHasAttachments=function(){return 0<a.selectedAnnouncement.attachments.length};a.markAsUnread=function(c){b.markAsUnread(a.selectedAnnouncement);d.go("tfAnnouncementList")}};tfAnnouncementsViewController.$inject=["$scope","$stateParams","$state","tfAnnouncementService"];angular.module("tfAnnouncementsControllers",[]).controller("tfAnnouncementsIndexController",tfAnnouncementsIndexController).controller("tfAnnouncementsViewController",tfAnnouncementsViewController);

angular.module("ykyAdminApp",["ykyAdminService"]).config(["$stateProvider",function(a){a.state("tfAdmin.standartSteps",{url:"standart-steps",templateUrl:"/ng/view/yky/admin/standart-steps/index.html",controller:"tfAdminStandartStepsController",ncyBreadcrumb:{label:"{{'standartSteps'|translate}}"}}).state("tfAdmin.standartSteps.new",{url:"/new",templateUrl:"/ng/view/yky/admin/standart-steps/new.html",controller:"tfAdminStandartStepsNewController",ncyBreadcrumb:{label:"{{'addStandartStep'|translate}}"}}).state("tfAdmin.standartSteps.edit",{url:"/:id",templateUrl:"/ng/view/yky/admin/standart-steps/edit.html",controller:"tfAdminStandartStepsEditController",ncyBreadcrumb:{label:"{{'editStandartStep'|translate}}"}}).state("tfAdmin.workTypes",{url:"work-types",templateUrl:"/ng/view/yky/admin/work-types/index.html",controller:"tfAdminWorkTypesController",ncyBreadcrumb:{label:"{{'workTypes'|translate}}"}}).state("tfAdmin.workTypes.new",{url:"/new",templateUrl:"/ng/view/yky/admin/work-types/new.html",controller:"tfAdminWorkTypesNewController",ncyBreadcrumb:{label:"{{'addWorkType'|translate}}"}}).state("tfAdmin.workTypes.edit",{url:"/:id",templateUrl:"/ng/view/yky/admin/work-types/edit.html",controller:"tfAdminWorkTypesEditController",ncyBreadcrumb:{label:"{{'editWorkType'|translate}}"}}).state("tfAdmin.steps",{url:"steps",templateUrl:"/ng/view/yky/admin/steps/index.html",controller:"tfAdminStepsController",ncyBreadcrumb:{label:"{{'steps'|translate}}"}}).state("tfAdmin.steps.new",{url:"/new",templateUrl:"/ng/view/yky/admin/steps/new.html",controller:"tfAdminStepsNewController",ncyBreadcrumb:{label:"{{'addStep'|translate}}"}}).state("tfAdmin.steps.edit",{url:"/:id",templateUrl:"/ng/view/yky/admin/steps/edit.html",controller:"tfAdminStepsEditController",ncyBreadcrumb:{label:"{{'editStep'|translate}}"}}).state("tfAdmin.qualityTables",{url:"quality-loss-tables",templateUrl:"/ng/view/yky/admin/quality-tables/index.html",controller:"tfAdminQualityTablesController",ncyBreadcrumb:{label:"{{'qualityTables'|translate}}"}}).state("tfAdmin.qualityTables.new",{url:"/new",templateUrl:"/ng/view/yky/admin/quality-tables/new.html",controller:"tfAdminQualityTablesNewController",ncyBreadcrumb:{label:"{{'addQualityTable'|translate}}"}}).state("tfAdmin.qualityTables.edit",{url:"/:id",templateUrl:"/ng/view/yky/admin/quality-tables/edit.html",controller:"tfAdminQualityTablesEditController",ncyBreadcrumb:{label:"{{'editQualityTable'|translate}}"}}).state("tfAdmin.models",{url:"models",templateUrl:"/ng/view/yky/admin/models/index.html",controller:"tfAdminModelsController",ncyBreadcrumb:{label:"{{'models'|translate}}"}}).state("tfAdmin.models.new",{url:"/new",templateUrl:"/ng/view/yky/admin/models/new.html",controller:"tfAdminModelsNewController",ncyBreadcrumb:{label:"{{'addModels'|translate}}"}}).state("tfAdmin.models.edit",{url:"/:id",templateUrl:"/ng/view/yky/admin/models/edit.html",controller:"tfAdminModelsEditController",ncyBreadcrumb:{label:"{{'editModels'|translate}}"}}).state("tfAdmin.logisticsAcceptencePoints",{url:"logistics-acceptence-points",templateUrl:"/ng/view/yky/admin/logistics-acceptence-points/index.html",controller:"tfAdminLogisticsAcceptencePointsController"}).state("tfAdmin.logisticsAcceptencePoints.new",{url:"/new",templateUrl:"/ng/view/yky/admin/logistics-acceptence-points/new.html",controller:"tfAdminLogisticsAcceptencePointsNewController"}).state("tfAdmin.logisticsAcceptencePoints.edit",{url:"/:id",templateUrl:"/ng/view/yky/admin/logistics-acceptence-points/edit.html",controller:"tfAdminLogisticsAcceptencePointsEditController"}).state("tfAdmin.logisticsLossTypes",{url:"logistics-loss-types",templateUrl:"/ng/view/yky/admin/logistics-loss-types/index.html",controller:"tfAdminLogisticsLossTypesController",data:{title:"logisticsLossTypes"}}).state("tfAdmin.logisticsLossTypes.new",{url:"/new",templateUrl:"/ng/view/yky/admin/logistics-loss-types/new.html",controller:"tfAdminLogisticsLossTypesNewController"}).state("tfAdmin.logisticsLossTypes.edit",{url:"/:id",templateUrl:"/ng/view/yky/admin/logistics-loss-types/edit.html",controller:"tfAdminLogisticsLossTypesEditController"}).state("tfAdmin.qualityLabTests",{url:"logistics-loss-types",templateUrl:"/ng/view/yky/admin/quality-lab-tests/index.html",controller:"tfAdminQualityLabTestsController",data:{title:"qualityLabTests"}}).state("tfAdmin.qualityLabTests.new",{url:"/new",templateUrl:"/ng/view/yky/admin/quality-lab-tests/new.html",controller:"tfAdminQualityLabTestsNewController",ncyBreadcrumb:{label:"{{'addQualityLabTes'|translate}}"}}).state("tfAdmin.qualityLabTests.edit",{url:"/:id",templateUrl:"/ng/view/yky/admin/quality-lab-tests/edit.html",controller:"tfAdminQualityLabTestsEditController",ncyBreadcrumb:{label:"{{'editQualityLabTest'|translate}}"}}).state("tfAdmin.lossSources",{url:"loss-sources",templateUrl:"/ng/view/yky/admin/loss-sources/index.html",controller:"tfAdminLossSourcesController",ncyBreadcrumb:{label:"{{'lossSources'|translate}}"}}).state("tfAdmin.lossSources.new",{url:"/new",templateUrl:"/ng/view/yky/admin/loss-sources/new.html",controller:"tfAdminLossSourcesNewController",ncyBreadcrumb:{label:"{{'addLossSource'|translate}}"}}).state("tfAdmin.lossSources.edit",{url:"/:id",templateUrl:"/ng/view/yky/admin/loss-sources/edit.html",controller:"tfAdminLossSourcesEditController",ncyBreadcrumb:{label:"{{'editLossSource'|translate}}"}}).state("tfAdmin.durations",{url:"durations",templateUrl:"/ng/view/yky/admin/durations/index.html",controller:"tfAdminDurationsController",ncyBreadcrumb:{label:"{{'durations'|translate}}"},data:{roles:["TFG_YKY_ADMIN","TFG_YKY_DURATION_DEF"]}}).state("tfAdmin.durations.new",{url:"/new",templateUrl:"/ng/view/yky/admin/durations/new.html",controller:"tfAdminDurationsNewController",ncyBreadcrumb:{label:"{{'addDuration'|translate}}"}}).state("tfAdmin.durations.edit",{url:"/:id",templateUrl:"/ng/view/yky/admin/durations/edit.html",controller:"tfAdminDurationsEditController",ncyBreadcrumb:{label:"{{'editDuration'|translate}}"}}).state("tfAdmin.objectionTypes",{url:"objection-types",templateUrl:"/ng/view/yky/admin/objection-types/index.html",controller:"tfAdminObjectionTypesController",ncyBreadcrumb:{label:"{{'objectionTypes'|translate}}"}}).state("tfAdmin.objectionTypes.new",{url:"/new",templateUrl:"/ng/view/yky/admin/objection-types/new.html",controller:"tfAdminObjectionTypesNewController",ncyBreadcrumb:{label:"{{'addObjectionType'|translate}}"}}).state("tfAdmin.objectionTypes.edit",{url:"/:id",templateUrl:"/ng/view/yky/admin/objection-types/edit.html",controller:"tfAdminObjectionTypesEditController",ncyBreadcrumb:{label:"{{'editObjectionType'|translate}}"}}).state("tfAdmin.mailLogs",{url:"/mail-logs",templateUrl:"/ng/view/yky/admin/mail-logs/index.html",controller:"tfAdminMailLogsController",ncyBreadcrumb:{label:"{{'mailLogs'|translate}}"}}).state("tfAdmin.pressParameters",{url:"/press-params",templateUrl:"/ng/view/yky/admin/press/parameters.html",controller:"tfPressParametersController",ncyBreadcrumb:{label:"{{'pressParameters'|translate}}"}})}]);

var ykyStandartStepsFactory=function(a){return a("/admin/api/standart-steps/:id",{id:"@id"},{update:{method:"PUT"}})};ykyStandartStepsFactory.$inject=["$resource"];var ykyModelsFactory=function(a){return a("/admin/api/models/:id",{id:"@code"},{update:{method:"PUT"}})};ykyModelsFactory.$inject=["$resource"];var ykyStepsFactory=function(a){return a("/admin/api/steps/:id",{id:"@id"},{update:{method:"PUT"}})};ykyStepsFactory.$inject=["$resource"];var ykyWorkTypeFactory=function(a){return a("/admin/api/work-types/:id",{id:"@id"},{update:{method:"PUT"}})};ykyWorkTypeFactory.$inject=["$resource"];var ykyQualityTableFactory=function(a){return a("/admin/api/quality-loss-tables/:id",{id:"@id"},{update:{method:"PUT"}})};ykyQualityTableFactory.$inject=["$resource"];var ykyLogisticsLossTypeFactory=function(a){return a("/admin/api/logistics-loss-types/:id",{id:"@id"},{update:{method:"PUT"}})};ykyLogisticsLossTypeFactory.$inject=["$resource"];var ykyLogisticsAcceptencePointFactory=function(a){return a("/admin/api/logistics-acceptence-points/:id",{id:"@id"},{update:{method:"PUT"}})};ykyLogisticsAcceptencePointFactory.$inject=["$resource"];ykyQualityLabTestFactory=function(a){return a("/admin/api/quality-lab-tests/:id",{id:"@id"},{update:{method:"PUT"}})};ykyQualityLabTestFactory.$inject=["$resource"];var ykyLossSourceFactory=function(a){return a("/admin/api/loss-source/:id",{id:"@id"},{update:{method:"PUT"}})};ykyLossSourceFactory.$inject=["$resource"];var ykyObjectionTypeFactory=function(a){return a("/admin/api/objection-types/:id",{id:"@id"},{update:{method:"PUT"}})};ykyObjectionTypeFactory.$inject=["$resource"];angular.module("ykyAdminService",[]).factory("ykyStandartStepsFactory",ykyStandartStepsFactory).factory("ykyModelsFactory",ykyModelsFactory).factory("ykyStepsFactory",ykyStepsFactory).factory("ykyWorkTypeFactory",ykyWorkTypeFactory).factory("ykyQualityTableFactory",ykyQualityTableFactory).factory("ykyLogisticsLossTypeFactory",ykyLogisticsLossTypeFactory).factory("ykyLogisticsAcceptencePointFactory",ykyLogisticsAcceptencePointFactory).factory("ykyQualityLabTestFactory",ykyQualityLabTestFactory).factory("ykyLossSourceFactory",ykyLossSourceFactory).factory("ykyObjectionTypeFactory",ykyObjectionTypeFactory);

var tfAdminDurationsController=function(a,b,c,d){b.searchParams={disegno:"",model:""};b.deleteItem=function(b){c.open({templateUrl:"durationDeleteModal.html",controller:"DurationDeleteModalController",resolve:{selectedItem:function(){return b}}}).result.then(function(b){a.delete("/admin/api/durations/"+b.id).success(function(){d.reload()})})};b.durationGridOptions={autoBind:!1,dataSource:{type:"json",transport:{read:function(f){a.post("/admin/api/durations/",b.searchParams).success(function(a){f.success(a)})}},pageSize:10},columns:[{field:"id",title:"#ID",filterable:{multi:!0}},{field:"part.disegno",title:"{{'disegno'| translate}}",filterable:{multi:!0}},{field:"part.models",title:"{{'models'| translate}}",filterable:{multi:!0},template:function(a){for(var b="",e=0;e<a.models.length;e++)b+='\x3cspan class\x3d"label label-default"\x3e'+a.models[e].code+"\x3c/span\x3e\x26nbsp;";return b}},{field:"insertedBy",title:"{{'insertedBy'| translate}}",filterable:{multi:!0}},{field:"insertedDate",title:"{{'insertedDate'| translate}}",filterable:{multi:!0}},{field:"updatedBy",title:"{{'updatedBy'| translate}}",filterable:{multi:!0}},{field:"updatedDate",title:"{{'updatedDate'| translate}}",filterable:{multi:!0}}]};b.getDurations=function(){b.durationsGrid.dataSource.read()}};tfAdminDurationsController.$inject=["$http","$scope","$modal","$state"];var DurationDeleteModalController=function(a,b,c){a.selectedItem=c;a.ok=function(){b.close(a.selectedItem)};a.cancel=function(){b.dismiss()}};DurationDeleteModalController.$inject=["$scope","$modalInstance","selectedItem"];var tfAdminDurationsNewController=function(a,b,c,d){a.durationExists=!1;a.stSteps=[];a.stepDurations=[];b.get("/common/api/standart-steps").success(function(b){a.stSteps=b});b.get("/admin/api/durations/new").success(function(b){a.item=b;a.stepDurations=b.stepDurations});a.saveItem=function(){a.item.stepDurations=a.stepDurations;b.post("/admin/api/durations/save",a.item).success(function(b){b?c.go("tfAdmin.durations",null,{reload:!0}):a.durationExists=!0})};a.partSelectionOptions=function(){return d.partOptions({})};a.modelSelectionOptions=function(){return d.modelOptions()}};tfAdminDurationsNewController.$inject=["$scope","$http","$state","commonSelectionOptions"];var tfAdminDurationsEditController=function(a,b,c,d,f,g){a.partSelectionOptions=function(){return g.partOptions({})};a.modelSelectionOptions=function(){return g.modelOptions()};a.stSteps=[];a.stepDurations=[];b.get("/common/api/standart-steps").success(function(b){a.stSteps=b});b.get("/admin/api/durations/"+d.id).success(function(b){a.item=b;a.stepDurations=b.stepDurations});a.updateItem=function(){a.item.stepDurations=a.stepDurations;b.post("/admin/api/durations/update",a.item).success(function(a){c.go("tfAdmin.durations",null,{reload:!0})})}};tfAdminDurationsEditController.$inject="$scope $http $state $stateParams tfContextRootService commonSelectionOptions".split(" ");angular.module("ykyAdminApp").controller("tfAdminDurationsController",tfAdminDurationsController).controller("tfAdminDurationsNewController",tfAdminDurationsNewController).controller("tfAdminDurationsEditController",tfAdminDurationsEditController).controller("DurationDeleteModalController",DurationDeleteModalController);

tfAdminLogisticsAcceptencePointsController=function(a,b,c,d,e){return e(a,b,d,c)};tfAdminLogisticsAcceptencePointsController.$inject=["$scope","$state","$modal","ykyLogisticsAcceptencePointFactory","tfBaseCrudListController"];tfAdminLogisticsAcceptencePointsNewController=function(a,b,c,d){return d(a,b,c,{},"tfAdmin.logisticsAcceptencePoints")};tfAdminLogisticsAcceptencePointsNewController.$inject=["$scope","$state","ykyLogisticsAcceptencePointFactory","tfBaseCrudNewController"];tfAdminLogisticsAcceptencePointsEditController=function(a,b,c,d,e){return d(a,b,c,{id:e.id},"tfAdmin.logisticsAcceptencePoints")};tfAdminLogisticsAcceptencePointsEditController.$inject=["$scope","$state","ykyLogisticsAcceptencePointFactory","tfBaseCrudEditController","$stateParams"];angular.module("ykyAdminApp").controller("tfAdminLogisticsAcceptencePointsController",tfAdminLogisticsAcceptencePointsController).controller("tfAdminLogisticsAcceptencePointsNewController",tfAdminLogisticsAcceptencePointsNewController).controller("tfAdminLogisticsAcceptencePointsEditController",tfAdminLogisticsAcceptencePointsEditController);

tfAdminLogisticsLossTypesController=function(a,b,c,d,e){return e(a,b,d,c)};tfAdminLogisticsLossTypesController.$inject=["$scope","$state","$modal","ykyLogisticsLossTypeFactory","tfBaseCrudListController"];tfAdminLogisticsLossTypesNewController=function(a,b,c,d){return d(a,b,c,{},"tfAdmin.logisticsLossTypes")};tfAdminLogisticsLossTypesNewController.$inject=["$scope","$state","ykyLogisticsLossTypeFactory","tfBaseCrudNewController"];tfAdminLogisticsLossTypesEditController=function(a,b,c,d,e){return d(a,b,c,{id:e.id},"tfAdmin.logisticsLossTypes")};tfAdminLogisticsLossTypesEditController.$inject=["$scope","$state","ykyLogisticsLossTypeFactory","tfBaseCrudEditController","$stateParams"];angular.module("ykyAdminApp").controller("tfAdminLogisticsLossTypesController",tfAdminLogisticsLossTypesController).controller("tfAdminLogisticsLossTypesNewController",tfAdminLogisticsLossTypesNewController).controller("tfAdminLogisticsLossTypesEditController",tfAdminLogisticsLossTypesEditController);

tfAdminLossSourcesController=function(a,b,c,d,e){return e(a,b,d,c)};tfAdminLossSourcesController.$inject=["$scope","$state","$modal","ykyLossSourceFactory","tfBaseCrudListController"];tfAdminLossSourcesNewController=function(a,b,c,d){return d(a,b,c,{},"tfAdmin.lossSources")};tfAdminLossSourcesNewController.$inject=["$scope","$state","ykyLossSourceFactory","tfBaseCrudNewController"];tfAdminLossSourcesEditController=function(a,b,c,d,e){return d(a,b,c,{id:e.id},"tfAdmin.lossSources")};tfAdminLossSourcesEditController.$inject=["$scope","$state","ykyLossSourceFactory","tfBaseCrudEditController","$stateParams"];angular.module("ykyAdminApp").controller("tfAdminLossSourcesController",tfAdminLossSourcesController).controller("tfAdminLossSourcesNewController",tfAdminLossSourcesNewController).controller("tfAdminLossSourcesEditController",tfAdminLossSourcesEditController);

var tfAdminMailLogsController=function(a,b){a.gridOptions={autoBind:!1,dataSource:{type:"json",transport:{read:function(c){b.post("/admin/api/mail-logs/list",a.searchParams).success(function(a){c.success(a)})}},pageSize:10},columns:[{field:"subject",title:"{{'subject'| translate}}",filterable:!0},{field:"to",title:"{{'toAddress'| translate}}",filterable:!0},{field:"cc",title:"{{'ccAddress'| translate}}",filterable:!0},{field:"mailDate",title:"{{'mailDate'| translate}}",filterable:!0}]};a.searchParams={};a.getMailLogs=function(){a.tfMailLogs.dataSource.read()}};tfAdminMailLogsController.$inject=["$scope","$http"];angular.module("ykyAdminApp").controller("tfAdminMailLogsController",tfAdminMailLogsController);

tfAdminModelsController=function(a,b,c,d,e){return e(a,b,d,c)};tfAdminModelsController.$inject=["$scope","$state","$modal","ykyModelsFactory","tfBaseCrudListController"];tfAdminModelsNewController=function(a,b,c,d){return d(a,b,c,{},"tfAdmin.models")};tfAdminModelsNewController.$inject=["$scope","$state","ykyModelsFactory","tfBaseCrudNewController"];tfAdminModelsEditController=function(a,b,c,d,e){return d(a,b,c,{id:e.id},"tfAdmin.models")};tfAdminModelsEditController.$inject=["$scope","$state","ykyModelsFactory","tfBaseCrudEditController","$stateParams"];angular.module("ykyAdminApp").controller("tfAdminModelsController",tfAdminModelsController).controller("tfAdminModelsNewController",tfAdminModelsNewController).controller("tfAdminModelsEditController",tfAdminModelsEditController);

tfAdminObjectionTypesController=function(a,b,c,d,e){return e(a,b,d,c)};tfAdminObjectionTypesController.$inject=["$scope","$state","$modal","ykyObjectionTypeFactory","tfBaseCrudListController"];tfAdminObjectionTypesNewController=function(a,b,c,d){a.addResponsible=function(){a.item.responsibles.push("")};a.removeResponsible=function(b){a.item.responsibles=a.item.responsibles.splice(b,1)};return d(a,b,c,{},"tfAdmin.objectionTypes")};tfAdminObjectionTypesNewController.$inject=["$scope","$state","ykyObjectionTypeFactory","tfBaseCrudNewController"];tfAdminObjectionTypesEditController=function(a,b,c,d,e){a.addResponsible=function(){a.item.responsibles.push("")};a.removeResponsible=function(b){a.item.responsibles=a.item.responsibles.splice(b,1)};return d(a,b,c,{id:e.id},"tfAdmin.objectionTypes")};tfAdminObjectionTypesEditController.$inject=["$scope","$state","ykyObjectionTypeFactory","tfBaseCrudEditController","$stateParams"];angular.module("ykyAdminApp").controller("tfAdminObjectionTypesController",tfAdminObjectionTypesController).controller("tfAdminObjectionTypesNewController",tfAdminObjectionTypesNewController).controller("tfAdminObjectionTypesEditController",tfAdminObjectionTypesEditController);

var tfPressParametersController=function(a,c){a.pressParameters={};a.numberFieldOptions={min:0,decimals:5,format:"n5"};c.get("/loss/press/api/get-parameters").success(function(b){a.pressParameters=b});a.save=function(){c.post("/loss/press/api/set-parameters",a.pressParameters).success(function(b){b&&a.reload()})}};tfPressParametersController.$inject=["$scope","$http"];angular.module("ykyAdminApp").controller("tfPressParametersController",tfPressParametersController);

tfAdminQualityLabTestsController=function(a,b,c,d,e){return e(a,b,d,c)};tfAdminQualityLabTestsController.$inject=["$scope","$state","$modal","ykyQualityLabTestFactory","tfBaseCrudListController"];tfAdminQualityLabTestsNewController=function(a,b,c,d){return d(a,b,c,{},"tfAdmin.qualityLabTests")};tfAdminQualityLabTestsNewController.$inject=["$scope","$state","ykyQualityLabTestFactory","tfBaseCrudNewController"];tfAdminQualityLabTestsEditController=function(a,b,c,d,e){return d(a,b,c,{id:e.id},"tfAdmin.qualityLabTests")};tfAdminQualityLabTestsEditController.$inject=["$scope","$state","ykyQualityLabTestFactory","tfBaseCrudEditController","$stateParams"];angular.module("ykyAdminApp").controller("tfAdminQualityLabTestsController",tfAdminQualityLabTestsController).controller("tfAdminQualityLabTestsNewController",tfAdminQualityLabTestsNewController).controller("tfAdminQualityLabTestsEditController",tfAdminQualityLabTestsEditController);

var tfAdminQualityTablesController=function(a,b,c,d,e){return e(a,b,d,c)};tfAdminQualityTablesController.$inject=["$scope","$state","$modal","ykyQualityTableFactory","tfBaseCrudListController"];var tfAdminQualityTablesNewController=function(a,b,c,d){return d(a,b,c,{},"tfAdmin.qualityTables")};tfAdminQualityTablesNewController.$inject=["$scope","$state","ykyQualityTableFactory","tfBaseCrudNewController"];var tfAdminQualityTablesEditController=function(a,b,c,d,e){return d(a,b,c,{id:e.id},"tfAdmin.qualityTables")};tfAdminQualityTablesEditController.$inject=["$scope","$state","ykyQualityTableFactory","tfBaseCrudEditController","$stateParams"];angular.module("ykyAdminApp").controller("tfAdminQualityTablesController",tfAdminQualityTablesController).controller("tfAdminQualityTablesNewController",tfAdminQualityTablesNewController).controller("tfAdminQualityTablesEditController",tfAdminQualityTablesEditController);

var tfAdminStandartStepsController=function(a,b,c,d,e){return e(a,b,d,c)};tfAdminStandartStepsController.$inject=["$scope","$state","$modal","ykyStandartStepsFactory","tfBaseCrudListController"];var tfAdminStandartStepsNewController=function(a,b,c,d,e,f){e.get("/common/api/loss-types").success(function(b){a.lossTypes=b});a.subLossTypesSelectOptions={itemTemplate:"{{'#:data#' | translate}}",tagTemplate:"{{'#:data#' | translate}}",dataSource:{type:"json",transport:{read:{url:f.getUrl("/common/api/production-sub-loss-types")}}}};return d(a,b,c,{},"tfAdmin.standartSteps")};tfAdminStandartStepsNewController.$inject="$scope $state ykyStandartStepsFactory tfBaseCrudNewController $http tfContextRootService".split(" ");var tfAdminStandartStepsEditController=function(a,b,c,d,e,f,g){f.get("/common/api/loss-types").success(function(b){a.lossTypes=b});a.subLossTypesSelectOptions={dataSource:{type:"json",transport:{read:{url:g.getUrl("/common/api/production-sub-loss-types")}}}};return d(a,b,c,{id:e.id},"tfAdmin.standartSteps")};tfAdminStandartStepsEditController.$inject="$scope $state ykyStandartStepsFactory tfBaseCrudEditController $stateParams $http tfContextRootService".split(" ");angular.module("ykyAdminApp").controller("tfAdminStandartStepsNewController",tfAdminStandartStepsNewController).controller("tfAdminStandartStepsController",tfAdminStandartStepsController).controller("tfAdminStandartStepsEditController",tfAdminStandartStepsEditController);

tfAdminStepsController=function(a,b,c,d,e){return e(a,b,d,c)};tfAdminStepsController.$inject=["$scope","$state","$modal","ykyStepsFactory","tfBaseCrudListController"];tfAdminStepsNewController=function(a,b,c,d,e,f){e.get("/common/api/loss-types").success(function(b){a.lossTypes=b});a.subLossTypesSelectOptions={itemTemplate:"{{'#:data#' | translate}}",tagTemplate:"{{'#:data#' | translate}}",dataSource:{type:"json",transport:{read:{url:f.getUrl("/common/api/production-sub-loss-types")}}}};return d(a,b,c,{},"tfAdmin.steps")};tfAdminStepsNewController.$inject="$scope $state ykyStepsFactory tfBaseCrudNewController $http tfContextRootService".split(" ");tfAdminStepsEditController=function(a,b,c,d,e,f,g){f.get("/common/api/loss-types").success(function(b){a.lossTypes=b});a.subLossTypesSelectOptions={dataSource:{type:"json",transport:{read:{url:g.getUrl("/common/api/production-sub-loss-types")}}}};return d(a,b,c,{id:e.id},"tfAdmin.steps")};tfAdminStepsEditController.$inject="$scope $state ykyStepsFactory tfBaseCrudEditController $stateParams $http tfContextRootService".split(" ");angular.module("ykyAdminApp").controller("tfAdminStepsController",tfAdminStepsController).controller("tfAdminStepsNewController",tfAdminStepsNewController).controller("tfAdminStepsEditController",tfAdminStepsEditController);

var tfAdminWorkTypesController=function(a,b,c,d,e){return e(a,b,d,c)};tfAdminWorkTypesController.$inject=["$scope","$state","$modal","ykyWorkTypeFactory","tfBaseCrudListController"];var tfAdminWorkTypesNewController=function(a,b,c,d){return d(a,b,c,{},"tfAdmin.workTypes")};tfAdminWorkTypesNewController.$inject=["$scope","$state","ykyWorkTypeFactory","tfBaseCrudNewController"];var tfAdminWorkTypesEditController=function(a,b,c,d,e){return d(a,b,c,{id:e.id},"tfAdmin.workTypes")};tfAdminWorkTypesEditController.$inject=["$scope","$state","ykyWorkTypeFactory","tfBaseCrudEditController","$stateParams"];angular.module("ykyAdminApp").controller("tfAdminWorkTypesController",tfAdminWorkTypesController).controller("tfAdminWorkTypesNewController",tfAdminWorkTypesNewController).controller("tfAdminWorkTypesEditController",tfAdminWorkTypesEditController);

angular.module("ykyLossApp",["ykyLossCommonComponents","ykyPressModule"]).config(["$stateProvider",function(a){a.state("losses",{url:"/losses",templateUrl:"/ng/view/yky/loss/index.html",ncyBreadcrumb:{label:"{{'losses'|translate}}"},data:{isAuthenticated:!0}}).state("losses.newQuality",{url:"/new/quality",templateUrl:"/ng/view/yky/loss/quality/new-quality-loss.html",controller:"newQualityLossController",ncyBreadcrumb:{label:"{{'addQualityLoss'|translate}}"},data:{roles:["TFG_YKY_LC_QUALITY"]}}).state("losses.newLogistics",{url:"/new/logistics",templateUrl:"/ng/view/yky/loss/logistics/new-logistics-loss.html",controller:"newLogisticLossController",ncyBreadcrumb:{label:"{{'addLogisticsLoss'|translate}}"},data:{roles:["TFG_YKY_LC_LOGISTICS"]}}).state("losses.newQualityLab",{url:"/new/quality-lab",templateUrl:"/ng/view/yky/loss/quality-lab/new-quality-lab-loss.html",controller:"newQualityLabLossController",ncyBreadcrumb:{label:"{{'addQualityLabLoss'|translate}}"},data:{roles:["TFG_YKY_LC_QUALITY_LAB"]}}).state("losses.newProduction",{url:"/new/production",templateUrl:"/ng/view/yky/loss/production/new-production-loss.html",controller:"newProductionLossController",ncyBreadcrumb:{label:"{{'addProductionLoss'|translate}}"},data:{roles:["TFG_YKY_LC_PRODUCTION"]}}).state("losses.newPressQuality",{url:"/new/press/quality",templateUrl:"/ng/view/yky/loss/press/new-press-quality-loss.html",controller:"newPressQualityLossController",ncyBreadcrumb:{label:"{{'addPressQualityLoss'|translate}}"},data:{roles:["TFG_YKY_PRESS_USER"]}}).state("losses.newPressLogistics",{url:"/new/press/logistics",templateUrl:"/ng/view/yky/loss/press/new-press-logistics-loss.html",controller:"newPressLogisticsLossController",ncyBreadcrumb:{label:"{{'addPressLogisticsLoss'|translate}}"},data:{roles:["TFG_YKY_PRESS_USER"]}}).state("losses.view",{url:"/view/:id",controller:"ykyLossViewController",templateUrl:"/ng/view/yky/loss/view.html",ncyBreadcrumb:{label:"{{'viewLoss'|translate}}"},data:{isAuthenticated:!0}}).state("losses.view.quality",{url:"/quality",templateUrl:"/ng/view/yky/loss/quality/view.html",controller:"ykyLossViewController",ncyBreadcrumb:{label:"{{'viewQualityLoss'|translate}}"}}).state("losses.view.production",{url:"/production",templateUrl:"/ng/view/yky/loss/production/view.html",controller:"ykyLossViewController",ncyBreadcrumb:{label:"{{'viewProductionLoss'|translate}}"}}).state("losses.view.logistic",{url:"/logistic",templateUrl:"/ng/view/yky/loss/logistics/view.html",controller:"ykyLossViewController",ncyBreadcrumb:{label:"{{'viewLogisticsLoss'|translate}}"}}).state("losses.view.qualityLab",{url:"/quality-lab",templateUrl:"/ng/view/yky/loss/quality-lab/view.html",controller:"ykyLossViewController",ncyBreadcrumb:{label:"{{'viewQualityLabLoss'|translate}}"}}).state("losses.view.press",{url:"/press",templateUrl:"/ng/view/yky/loss/press/view.html",controller:"ykyLossViewController",ncyBreadcrumb:{label:"{{'viewPressLoss'|translate}}"}}).state("losses.notFound",{url:"/not-found/:id",templateUrl:"/ng/view/yky/loss/not-found.html",controller:"ykyLossesNotFoundController",ncyBreadcrumb:{label:"{{'lossNotFound'|translate}}"}}).state("losses.unApprovedLosses",{url:"/un-approved-losses",templateUrl:"/ng/view/yky/loss/listing/list-un-approved.html",controller:"ykyUnApprovedLossesController",ncyBreadcrumb:{label:"{{'listUnApprovedLosses'|translate}}"},data:{roles:["TFG_YKY_APPROVAL_QUALITY","TFG_YKY_APPROVAL_LOGISTICS"]}}).state("losses.inCompletedLosses",{url:"/un-completed-losses",templateUrl:"/ng/view/yky/loss/listing/list-in-completed.html",controller:"ykyInCompletedLossesController",ncyBreadcrumb:{label:"{{'listInCompletedLosses'|translate}}"},data:{roles:["TFG_YKY_LC_PRODUCTION"]}}).state("losses.listOpenPressLosses",{url:"/press-open-losses",templateUrl:"/ng/view/yky/loss/press/press-open-losses.html",controller:"ykyPressOpenLossesController",ncyBreadcrumb:{label:"{{'listOpenPressLosses'|translate}}"},data:{roles:["TFG_YKY_PRESS_USER"]}}).state("losses.editPressLoss",{url:"/press/edit/:id",templateUrl:"/ng/view/yky/loss/press/edit.html",controller:"editPressController",ncyBreadcrumb:{label:"{{'editPress'|translate}}"},data:{roles:["TFG_YKY_PRESS_USER"]}})}]);

var runFunc=function(a,b){a.$on("$stateChangeStart",function(a,c,d,e,f){b.get("/loss/api/delete-cached-all").success(function(a){console.log("cached upload files are cleared...")})})};runFunc.$inject=["$rootScope","$http"];angular.module("ykyLossCommonComponents",[]).run(runFunc);

var ykyAttachmentsController=function(a,d,c,f,e){a.attachmentOptions={saveUrl:e.getUrl("/loss/api/upload-file"),removeUrl:e.getUrl("/loss/api/delete-cached"),autoUpload:!0};a.onUpload=function(a){console.log("upload triggered");var b=a.XMLHttpRequest;b&&b.addEventListener("readystatechange",function(a){1==b.readyState&&b.setRequestHeader("X-CSRF-TOKEN",f.getCsrfToken())})}};ykyAttachmentsController.$inject=["$scope","$rootScope","$http","tfAuthService","tfContextRootService"];var ykyLossViewAttachmentController=function(a,d,c){d("ykyAttachmentsController",{$scope:a});a.ok=function(){c.close()};a.cancel=function(){c.dismiss()}};ykyLossViewAttachmentController.$inject=["$scope","$controller","$modalInstance"];angular.module("ykyLossCommonComponents").controller("ykyAttachmentsController",ykyAttachmentsController).controller("ykyLossViewAttachmentController",ykyLossViewAttachmentController);

var ykyCommonLossController=function(a){a.getTotalDiscardedPartCost=function(){return 0};a.getQualityLabTestCost=function(){return 0};a.getDiscardedPartCount=function(){return 0};a.getTotalWorkCost=function(){return 0};a.getTotalCostOfSteps=function(){return 0};var c=new Date;c.setMonth(c.getMonth()-1);var g=new Date;g.setDate(g.getDate()+1);a.lossDateOptions={min:c,max:g};a.isLossCostValid=function(){return 0<a.getTotalLossCost()||0<a.getDiscardedPartCountIfExists()};a.getDiscardedPartCountIfExists=function(){var b=a.getDiscardedPartCount();return b?b:0};a.getTotalLossCost=function(){var b=a.getTotalWorkCost(),b=b?b:0,d=a.getTotalDiscardedPartCost(),d=d?d:0,e=a.getQualityLabTestCost(),e=e?e:0,f=a.getTotalCostOfSteps(),f=f?f:0,c=a.getTotalOtherCosts();return b+d+e+f+(c?c:0)}};ykyCommonLossController.$inject=["$scope"];angular.module("ykyLossCommonComponents").controller("ykyCommonLossController",ykyCommonLossController);

var ykyDiscardedPartsController=function(b,f,g){b.discardedParts=[];b.baseUnitPrices={};b.discardedPartsSelectionOptions=function(){return g.partOptions({change:function(a){b.discardedParts[this.element[0].attributes["data-index"].value].baseUnitPrice=null;(a=a.sender.value())&&b.getBaseUnitPrice(a)}})};b.addDiscardedPart=function(){b.discardedParts.push({isVoucherValid:!1,qty:1,disegno:"",totalPrice:function(){return this.baseUnitPrice?this.baseUnitPrice.baseUnitPriceInTl*this.qty:0}})};b.removeDiscardedPart=function(a){b.discardedParts.splice(a,1)};b.checkDiscardPartVoucherNo=function(a){a.discardedPartVoucherNo&&f.get("/loss/api/discard-vocuher-no/"+a.discardedPartVoucherNo).success(function(b){a.isVoucherValid=b})};b.onBaseUnitPriceSelect=function(a){for(var c=b.discardedParts[a].basePriceId,d=b.baseUnitPrices[b.discardedParts[a].disegno],e=0;e<d.length;e++)if(d[e].id==c){b.discardedParts[a].baseUnitPrice=d[e];return}b.discardedParts[a].baseUnitPrice=null};b.getBaseUnitPrice=function(a){b.baseUnitPrices[a]||f.get("/loss/api/get-part-base-price/"+a).success(function(c){b.baseUnitPrices[a]=c})};b.getBaseUnitPricesFor=function(a){if((a=b.getDisegnoAtRow(a))&&b.baseUnitPrices[a])return b.baseUnitPrices[a]};b.getDisegnoAtRow=function(a){if(a=b.discardedParts[a].disegno)return a;""};b.isBasePricePresent=function(a){var c=b.getDisegnoAtRow(a);a=b.getBaseUnitPricesFor(a);return c&&a&&0<a.length};b.getTotalDiscardedPartCost=function(){var a=0;angular.forEach(b.discardedParts,function(b,d){a+=b.totalPrice()});return a};b.getDiscardedPartCount=function(){return b.discardedParts.length}};ykyDiscardedPartsController.$inject=["$scope","$http","commonSelectionOptions"];angular.module("ykyLossCommonComponents").controller("ykyDiscardedPartsController",ykyDiscardedPartsController);

var ykyWorkDurationsController=function(a,f,e){a.workTypes=e.getWorkTypes();a.workDurations=[];a.addNewWorkDuration=function(){a.workDurations.push({qty:1,workDuration:0})};a.removeWorkDuration=function(b){a.workDurations.splice(b,1)};a.getTotalWorkTime=function(){for(var b=0,c=0;c<a.workDurations.length;c++)b+=a.workDurations[c].qty*a.workDurations[c].workDuration;return b};a.getTotalWorkCost=function(){for(var b=0,c=0;c<a.workDurations.length;c++)for(var d=0;d<a.workTypes.length;d++)if(a.workDurations[c].workType==a.workTypes[d].id){b+=a.workTypes[d].wageInMinutes*a.workDurations[c].qty*a.workDurations[c].workDuration;break}return b/60};a.getLaborPanelClass=function(){var b=a.getTotalWorkCost();return b?1E4<b?"panel panel-danger":1E3<b?"panel panel-warning":"panel panel-info":"panel panel-default"}};ykyWorkDurationsController.$inject=["$scope","$http","commonDataSourceService"];angular.module("ykyLossCommonComponents").controller("ykyWorkDurationsController",ykyWorkDurationsController);

(function(){var d=function(a){a.otherCosts=[];a.addOtherCost=function(){a.otherCosts.push({description:"",cost:0})};a.removeOtherCost=function(b){a.otherCosts.splice(b,1)};a.getTotalOtherCosts=function(){for(var b=0,c=0;c<a.otherCosts.length;c++)a.otherCosts[c].cost&&(b+=a.otherCosts[c].cost);return b}};d.$inject=["$scope"];angular.module("ykyLossCommonComponents").controller("ykyOtherCostsController",d)})();

var commonDataSourceService=function(f,c,e){var a={parts:void 0,models:void 0,tuts:void 0,standartSteps:void 0,steps:void 0,qLossTables:void 0,workTypes:void 0,lossCodes:void 0,logisticsLossTypes:void 0,logisticsAcceptencePoints:void 0,qualityLabTests:void 0,productionSubLossTypes:void 0,lossSources:void 0,blueCollarWage:void 0,suppliers:void 0,lossTypes:void 0,approverRoles:void 0,atrscParams:void 0,pressSuppliers:void 0,firmTypes:void 0,getFirmTypes:function(){void 0==a.firmTypes&&(a.firmTypes=[],c.get("/loss/press/api/firm-types").success(function(b){a.firmTypes.push.apply(a.firmTypes,b)}));return a.firmTypes},getAtrscParams:function(){void 0==a.atrscParams&&(a.atrscParams=new kendo.data.ObservableArray([]),c.get("/loss/press/api/atrsc-params").success(function(b){a.atrscParams.push.apply(a.atrscParams,b)}));return a.atrscParams},getPressSuppliers:function(){void 0==a.pressSuppliers&&(a.pressSuppliers=new kendo.data.ObservableArray([]),c.get("/loss/press/api/suppliers").success(function(b){a.pressSuppliers.push.apply(a.pressSuppliers,b)}));return a.pressSuppliers}};c.get("/report/api/get-suppliers").success(function(b){a.suppliers=new kendo.data.ObservableArray(b);e.isSupsReady=!0});c.get("/common/api/parts").success(function(b){a.parts=new kendo.data.ObservableArray(b);e.isArrsReady=!0});a.getSuppliers=function(){return a.suppliers};a.getLossTypes=function(){void 0==a.lossTypes&&(a.lossTypes=new kendo.data.ObservableArray([]),c.get("/common/api/loss-types").success(function(b){a.lossTypes.push.apply(a.lossTypes,b)}));return a.lossTypes};a.getBlueCollarWage=function(){void 0==a.blueCollarWage&&(a.blueCollarWage=0,c.get("/loss/api/blue-collar-wage").success(function(b){a.blueCollarWage=b}));return a.blueCollarWage};a.getLossSources=function(){void 0==a.lossSources&&(a.lossSources=new kendo.data.ObservableArray([]),c.get("/common/api/loss-sources").success(function(b){a.lossSources.push.apply(a.lossSources,b)}));return a.lossSources};a.getProductionSubLossTypes=function(){void 0==a.productionSubLossTypes&&(a.productionSubLossTypes=new kendo.data.ObservableArray([]),c.get("/common/api/production-sub-loss-types").success(function(b){a.productionSubLossTypes.push.apply(a.productionSubLossTypes,b)}));return a.productionSubLossTypes};a.getQualityLabTests=function(){void 0==a.qualityLabTests&&(a.qualityLabTests=new kendo.data.ObservableArray([]),c.get("/common/api/quality-lab-tests").success(function(b){a.qualityLabTests.push.apply(a.qualityLabTests,b)}));return a.qualityLabTests};a.getLogisticsAcceptencePoints=function(){void 0==a.logisticsAcceptencePoints&&(a.logisticsAcceptencePoints=new kendo.data.ObservableArray([]),c.get("/common/api/logistics-acceptence-points").success(function(b){a.logisticsAcceptencePoints.push.apply(a.logisticsAcceptencePoints,b)}));return a.logisticsAcceptencePoints};a.getLogisticsLossTypes=function(){void 0==a.logisticsLossTypes&&(a.logisticsLossTypes=new kendo.data.ObservableArray([]),c.get("/common/api/logistics-loss-types").success(function(b){a.logisticsLossTypes.push.apply(a.logisticsLossTypes,b)}));return a.logisticsLossTypes};a.getModels=function(){void 0==a.models&&(a.models=new kendo.data.ObservableArray([]),c.get("/common/api/models").success(function(b){a.models.push.apply(a.models,b)}));return a.models};a.getTuts=function(){void 0==a.tuts&&(a.tuts=new kendo.data.ObservableArray([]),c.get("/common/api/tuts").success(function(b){a.tuts.push.apply(a.tuts,b)}));return a.tuts};a.getStandartSteps=function(){void 0==a.standartSteps&&(a.standartSteps=new kendo.data.ObservableArray([]),c.get("/common/api/standart-steps").success(function(b){a.standartSteps.push.apply(a.standartSteps,b)}));return a.standartSteps};a.getSteps=function(){void 0==a.steps&&(a.steps=new kendo.data.ObservableArray([]),c.get("/common/api/steps").success(function(b){a.steps.push.apply(a.steps,b)}));return a.steps};a.getQualityLossTables=function(){void 0==a.qLossTables&&(a.qLossTables=new kendo.data.ObservableArray([]),c.get("/common/api/quality-loss-tables").success(function(b){a.qLossTables.push.apply(a.qLossTables,b)}));return a.qLossTables};a.getWorkTypes=function(){void 0==a.workTypes&&(a.workTypes=new kendo.data.ObservableArray([]),c.get("/common/api/work-types").success(function(b){a.workTypes.push.apply(a.workTypes,b)}));return a.workTypes};a.getLossCodes=function(){void 0==a.lossCodes&&(a.lossCodes=new kendo.data.ObservableArray([]),c.get("/common/api/loss-codes").success(function(b){a.lossCodes.push.apply(a.lossCodes,b)}));return a.lossCodes};a.getApproverRoles=function(){void 0===a.approverRoles&&(a.approverRoles=new kendo.data.ObservableArray([]),c.get("/loss/api/approver-roles").success(function(b){for(var c=0;c<b.length;c++){var d="";b[c].approverRole.includes("DESK")?d="Montaj Masası":b[c].approverRole.includes("SAMPLE")?d="Numune Masası":b[c].approverRole.includes("AFTERSALES")?d="Satış Sonrası Masası":b[c].approverRole.includes("SUSPENSION")?d="Süspansiyon Masası":b[c].approverRole.includes("BODY")&&(d="Gövde Masası");b[c]={name:d,id:b[c].id}}a.approverRoles.push.apply(a.approverRoles,b)}));return a.approverRoles};a.modelsDS=function(){return{type:"json",data:a.getModels()}};a.tutsDS=function(){return{type:"json",data:a.getTuts()}};a.standartStepsDS=function(){return{type:"json",data:a.getStandartSteps()}};a.stepsDS=function(){return{type:"json",data:a.steps}};a.qualityLossTablesDS=function(){return{type:"json",data:a.getQualityLossTables()}};a.workTypesDS=function(){return{type:"json",data:a.getWorkTypes()}};a.lossCodesDS=function(){return{type:"json",data:a.getLossCodes()}};a.partsDS=function(){return{type:"json",data:a.parts}};return a};commonDataSourceService.$inject=["tfContextRootService","$http","$rootScope","$q"];angular.module("ykyLossCommonComponents").factory("commonDataSourceService",commonDataSourceService);

var commonSelectionOptions=function(a,e){return{partOptions:function(c){var d={dataTextField:"disegno",dataValueField:"disegno",optionLabel:"...",minLength:3,filter:"contains",template:"#:data.disegno# - #:data.description#",dataSource:a.partsDS(),virtual:{itemHeight:26,valueMapper:function(b){b.value?e.get("/common/api/get-part/"+b.value).success(function(a){b.success(a)}):b.success(-1)}}};c&&angular.extend(d,c);return d},modelOptions:function(){return{dataTextField:"name",dataValueField:"code",template:"#:data.code# - #:data.name#",optionLabel:"...",dataSource:a.modelsDS()}},tutOptions:function(){return{dataTextField:"orgMmm",dataValueField:"orgMmm",filter:"contains",template:"#:data.orgMmm# - #:data.description#",optionLabel:"...",dataSource:a.tutsDS()}}}};commonSelectionOptions.$inject=["commonDataSourceService","$http"];angular.module("ykyLossCommonComponents").factory("commonSelectionOptions",commonSelectionOptions);

angular.module("ykyPressModule",[]);

var ykyPressApproveModalController=function(b,a,c){a.loss=c;a.approve=function(){b.close(c)};a.cancel=function(){b.dismiss()};setTimeout(function(){a.validator.validate()},300)};ykyPressApproveModalController.$inject=["$modalInstance","$scope","loss"];angular.module("ykyPressModule").controller("ykyPressApproveModalController",ykyPressApproveModalController);

var pressCommonController=function(a,k,e,c,f,l,g){a.lossDetails=[];a.uploadErrors=[];a.isValidated=!1;a.hrdParams=[];a.pressLoss={supplierDto:{sapCode:""},firmType:void 0,firmDescription:"",lossDate:void 0,lossDescription:""};var h=a.isLogistics?e.getUrl("/loss/press/api/logistics/upload"):e.getUrl("/loss/press/api/quality/upload");a.addExcel=function(){f.open({templateUrl:"/ng/view/yky/loss/press/add-excel.html",controller:"pressUploadExcelModalController",resolve:{saveUrl:function(){return h}}}).result.then(function(){a.getDetails();a.getErrors();a.checkValidation()})};c.get("/loss/press/api/hrd-params").success(function(b){a.hrdParams.push.apply(a.hrdParams,b)});a.getDetails=function(){c.get("/loss/press/api/get-details").success(function(b){a.lossDetails.push.apply(a.lossDetails,b)})};a.getErrors=function(){c.get("/loss/press/api/get-errors").success(function(b){a.uploadErrors.push.apply(a.uploadErrors,b)})};a.updateDetails=function(){a.updateDetailsWithCallback(void 0)};a.updateDetailsWithCallback=function(b){for(var d=0;d<a.lossDetails.length;d++)a.lossDetails[d].type=a.isLogistics?"logistics":"quality";a.isLogistics?(console.log(a.lossDetails),c.post("/loss/press/api/update-details-l",a.lossDetails).success(function(c){a.lossDetails.splice(0,a.lossDetails.length);a.lossDetails.push.apply(a.lossDetails,c);a.checkValidation();b&&b()})):(console.log(a.lossDetails),c.post("/loss/press/api/update-details-q",a.lossDetails).success(function(c){a.lossDetails.splice(0,a.lossDetails.length);a.lossDetails.push.apply(a.lossDetails,c);a.checkValidation();b&&b()}))};a.addDetail=function(){a.isValidated=!1;a.lossDetails.push({disegnoBasePriceDiff:0})};a.save=function(){a.updateDetailsWithCallback(function(){var b=a.pressLoss;b.details=a.lossDetails;b.pressLossType=a.isLogistics?"LOGISTICS":"QUALITY";c.post("/loss/press/api/save",b).success(function(a){a&&g.go("losses.view",{id:a})})})};a.isValid=function(){return a.isValidated};a.checkValidation=function(){a.isValidated=0<a.lossDetails.length&&a.validator.validate()};setTimeout(function(){a.validator.validate()},1E3)};pressCommonController.$inject="$scope tfAuthService tfContextRootService $http $modal commonDataSourceService $state".split(" ");angular.module("ykyPressModule").controller("pressCommonController",pressCommonController);

var editPressController=function(d,e,a,c,f){a.loss={};e("pressCommonController",{$scope:a});c.get("/loss/api/press/get/"+d.id).success(function(b){a.loss=b});a.easyUpdateDetails=function(){var b=void 0;"LOGISTICS"==a.loss.pressLossType?b="/loss/press/api/easy-update-details-l":"QUALITY"==a.loss.pressLossType&&(b="/loss/press/api/easy-update-details-q");b&&c.post(b,a.loss.details).success(function(b){a.loss.details.splice(0,a.loss.details.length);a.loss.details.push.apply(a.loss.details,b)})};a.saveDetails=function(){var b=void 0;"LOGISTICS"==a.loss.pressLossType?b="/loss/press/api/save-details-l":"QUALITY"==a.loss.pressLossType&&(b="/loss/press/api/save-details-q");b&&c.post(b,a.loss.details).success(function(b){f.go("losses.view",{id:a.loss.id},{reload:!0})})}};editPressController.$inject=["$stateParams","$controller","$scope","$http","$state"];angular.module("ykyPressModule").controller("editPressController",editPressController);

var pressLogisticsDetailDirective=function(){return{restrict:"AE",replace:"true",scope:{edit:"\x3dedit",detailEdit:"\x3ddetailEdit",lossDetails:"\x3dlossDetails",hrdParams:"\x3dhrdParams"},templateUrl:"/ng/view/yky/loss/press/press-logistics-detail.table.html",controller:pressLossDetailDirectiveController}};angular.module("ykyPressModule").directive("pressLogisticsDetailTable",pressLogisticsDetailDirective);

var newPressLogisticsLossController=function(a,c,b){a.isLogistics=!0;b("pressCommonController",{$scope:a})};newPressLogisticsLossController.$inject=["$scope","$http","$controller"];angular.module("ykyPressModule").controller("newPressLogisticsLossController",newPressLogisticsLossController);

var pressLossDetailDirectiveController=function(a,c,b){a.atrscParams=b.getAtrscParams();a.partSelectionOptions=function(){return c.partOptions()};a.removeDetail=function(b){a.lossDetails.splice(b,1)};a.atrscFieldOptions={dataSource:b.getAtrscParams()}};pressLossDetailDirectiveController.$inject=["$scope","commonSelectionOptions","commonDataSourceService"];angular.module("ykyPressModule").controller("pressLossDetailDirectiveController",pressLossDetailDirectiveController);

var pressMasterDetailDirective=function(){return{restrict:"AE",replace:!0,transclude:!0,scope:{supplier:"\x3dsupplier",firmType:"\x3dfirmType",firmDescription:"\x3dfirmDescription",lossDetails:"\x3dlossDetails",lossDate:"\x3dlossDate",lossDescription:"\x3dlossDescription",uploadErrors:"\x3duploadErrors",validator:"\x3dvalidator",validateFunc:"\x26",saveFunc:"\x26"},templateUrl:"/ng/view/yky/loss/press/press-master-detail-directive.html",controller:pressMasterDetailDirectiveController}};angular.module("ykyPressModule").directive("pressMasterDetailDirective",pressMasterDetailDirective);

var ykyPressOpenLossesController=function(a,b){a.openLosses=[];b.get("/loss/press/api/list-open").success(function(b){a.openLosses.push.apply(a.openLosses,b)})};ykyPressOpenLossesController.$inject=["$scope","$http"];angular.module("ykyPressModule").controller("ykyPressOpenLossesController",ykyPressOpenLossesController);

var pressQualityDetailDirective=function(){return{restrict:"AE",replace:"true",scope:{approve:"\x3dapprove",edit:"\x3dedit",lossDetails:"\x3dlossDetails",hrdParams:"\x3dhrdParams"},templateUrl:"/ng/view/yky/loss/press/press-quality-detail.table.html",controller:pressLossDetailDirectiveController}};angular.module("ykyPressModule").directive("pressQualityDetailDirective",pressQualityDetailDirective);

var newPressQualityLossController=function(a,c,b){a.isLogistics=!1;b("pressCommonController",{$scope:a})};newPressQualityLossController.$inject=["$scope","$http","$controller"];angular.module("ykyPressModule").controller("newPressQualityLossController",newPressQualityLossController);

var pressUploadExcelModalController=function(a,c,d,e,f){a.attachmentOptions={removeUrl:d.getUrl("/loss/api/delete-cached"),autoUpload:!0,saveUrl:f};a.onUpload=function(a){console.log("upload triggered");var b=a.XMLHttpRequest;b&&b.addEventListener("readystatechange",function(a){1==b.readyState&&b.setRequestHeader("X-CSRF-TOKEN",e.getCsrfToken())})};a.close=function(){c.close()};a.onSuccess=function(c){a.close()}};pressUploadExcelModalController.$inject=["$scope","$modalInstance","tfContextRootService","tfAuthService","saveUrl"];angular.module("ykyPressModule").controller("pressUploadExcelModalController",pressUploadExcelModalController);

var pressMasterDetailDirectiveController=function(a,d){a.pressSuppliers=d.getPressSuppliers();a.firmTypes=d.getFirmTypes();a.getTotalCost=function(){for(var b=0,c=0;c<a.lossDetails.length;c++)b+=a.lossDetails[c]._totalCost;return b}};pressMasterDetailDirectiveController.$inject=["$scope","commonDataSourceService"];angular.module("ykyPressModule").controller("pressMasterDetailDirectiveController",pressMasterDetailDirectiveController);

var newQualityLossController=function(b,a,c,d,e,f){b("ykyCommonLossController",{$scope:a});b("ykyWorkDurationsController",{$scope:a});b("ykyAttachmentsController",{$scope:a});b("ykyDiscardedPartsController",{$scope:a});b("ykyOtherCostsController",{$scope:a});a.suppliers=[];a.qualityLossTables=e.getQualityLossTables();a.lossCodes=e.getLossCodes();a.loss={qty:0};a.modelSelectionOptions=d.modelOptions();a.partSelectionOptions=function(){return d.partOptions({cascade:function(b){this.value()&&c.post("/common/api/supplier-from-disegno",this.value()).success(function(b){a.suppliers=b;console.log("suppliers: ",a.suppliers)})}})};a.saveQualityLoss=function(){a.loss.workDurations=a.workDurations;a.loss.discardedParts=a.discardedParts;a.loss.otherCosts=a.otherCosts;c.post("/loss/api/quality/save",a.loss).success(function(a){a&&f.go("losses.view",{id:a})})};setTimeout(function(){a.validator.validate()},1E3)};newQualityLossController.$inject="$controller $scope $http commonSelectionOptions commonDataSourceService $state".split(" ");angular.module("ykyLossApp").controller("newQualityLossController",newQualityLossController);

var newQualityLabLossController=function(e,a,f,g,h,k){e("ykyCommonLossController",{$scope:a});e("ykyWorkDurationsController",{$scope:a});e("ykyAttachmentsController",{$scope:a});a.suppliers=[];a.approverRoles=[];a.qualityLabTestInfos=h.getQualityLabTests();a.qualityLabTests=[];a.loss={qty:0};a.getApproverRoles=function(){f.get("/loss/api/approver-roles").success(function(b){for(var d=0;d<b.length;d++){var c="";b[d].approverRole.includes("DESK")?c="Montaj Masası":b[d].approverRole.includes("SAMPLE")?c="Numune Masası":b[d].approverRole.includes("AFTERSALES")?c="Satış Sonrası Masası":b[d].approverRole.includes("SUSPENSION")?c="Süspansiyon Masası":b[d].approverRole.includes("BODY")&&(c="Gövde Masası");b[d]={name:c,id:b[d].id}}a.approverRoles=b})};a.getApproverRoles();a.modelSelectionOptions=g.modelOptions();a.partSelectionOptions=function(){return g.partOptions({cascade:function(b){this.value()&&f.post("/common/api/supplier-from-disegno",this.value()).success(function(b){a.suppliers=b})}})};a.addNewQualityLabTest=function(){a.qualityLabTests.push({qty:1,testId:0})};a.removeQualityLabTest=function(b){a.qualityLabTests.splice(b,1)};a.getQualityTestPrice=function(b){if(void 0!=b)for(var d=a.qualityLabTests[b].testId,c=0;c<a.qualityLabTestInfos.length;c++)if(a.qualityLabTestInfos[c].id==d)return a.qualityLabTestInfos[c].price*a.qualityLabTests[b].qty;return 0};a.getQualityLabTestCost=function(){var b=0;angular.forEach(a.qualityLabTests,function(d,c){b+=a.getQualityTestPrice(c)});return b};a.saveQualityLabLoss=function(){a.loss.workDurations=a.workDurations;a.loss.qualityLabTests=a.qualityLabTests;f.post("/loss/api/quality-lab/save",a.loss).success(function(a){a&&k.go("losses.view",{id:a})})};a.validate=function(){setTimeout(function(){a.validator.validate()},1E3)};a.validate()};newQualityLabLossController.$inject="$controller $scope $http commonSelectionOptions commonDataSourceService $state".split(" ");angular.module("ykyLossApp").controller("newQualityLabLossController",newQualityLabLossController);

var newLogisticLossController=function(b,a,d,e,c,f){b("ykyCommonLossController",{$scope:a});b("ykyWorkDurationsController",{$scope:a});b("ykyAttachmentsController",{$scope:a});b("ykyDiscardedPartsController",{$scope:a});b("ykyOtherCostsController",{$scope:a});a.suppliers=[];a.lossCodes=c.getLossCodes();a.logisticsLossTypes=c.getLogisticsLossTypes();a.logisticsAcceptencePoints=c.getLogisticsAcceptencePoints();a.loss={qty:0};a.modelSelectionOptions=e.modelOptions();a.partSelectionOptions=function(){return e.partOptions({cascade:function(b){this.value()&&d.post("/common/api/supplier-from-disegno",this.value()).success(function(b){a.suppliers=b})}})};a.saveLogisticsLoss=function(){a.loss.workDurations=a.workDurations;a.loss.discardedParts=a.discardedParts;a.loss.otherCosts=a.otherCosts;d.post("/loss/api/logistics/save",a.loss).success(function(a){a&&f.go("losses.view",{id:a})})};setTimeout(function(){a.validator.validate()},1E3)};newLogisticLossController.$inject="$controller $scope $http commonSelectionOptions commonDataSourceService $state".split(" ");angular.module("ykyLossApp").controller("newLogisticLossController",newLogisticLossController);

var newProductionLossController=function(c,a,f,e,g,k){c("ykyCommonLossController",{$scope:a});c("ykyWorkDurationsController",{$scope:a});c("ykyAttachmentsController",{$scope:a});c("ykyDiscardedPartsController",{$scope:a});c("ykyOtherCostsController",{$scope:a});a.blueCollarWage=function(){return g.getBlueCollarWage()};a.lossTypes=g.getProductionSubLossTypes();a.stepDefs=[];a.lossSources=g.getLossSources();a.shiftCodes=[];a.loss={qty:0,steps:[]};a.getLogisticsTypeId=function(){for(var b=0;b<a.lossSources.length;b++)if("L"==a.lossSources[b].shortName)return a.lossSources[b].id};a.modelSelectionOptions=e.modelOptions();a.partSelectionOptions=function(){return e.partOptions({change:function(){a.invalidateSteps()}})};a.tutOptions=e.tutOptions();a.effectedTutOptions=e.tutOptions();a.modelSelectionOptions.change=function(){a.invalidateSteps()};a.tutOptions.change=function(){a.invalidateSteps();a.updateShiftCodes()};a.getTotalCostOfSteps=function(){var b=0;angular.forEach(a.loss.steps,function(a,d){a.selected&&(b+=a.getCost())});return b};a.getTotalTimeOfSteps=function(){var b=0;angular.forEach(a.loss.steps,function(a,d){a.selected&&(b+=a.getTime())});return b};a.isStepsValid=function(){return a.loss&&a.loss.steps&&0<a.loss.steps.length};a.invalidateSteps=function(){a.loss.steps=[]};a.updateShiftCodes=function(){f.get("/common/api/shift-codes/"+a.loss.tut).success(function(b){a.shiftCodes=b})};a.updateSteps=function(){var b=a.loss.lossType,c=a.loss.disegno,d=a.loss.model,h=a.loss.tut;c&&d&&h&&f.get("/common/api/related-steps/"+
b+"/"+d+"/"+c+"/"+h).success(function(b){a.loss.steps=[];for(var d=0;d<b.length;d++){var c={};angular.copy(b[d],c);c.selected=!1;c.qty=a.loss.qty;c.getTime=function(){return this.qty*this.stepDuration};c.getCost=function(){return this.getTime()*a.blueCollarWage()/60};a.loss.steps.push(c)}})};a.saveProductionLoss=function(){for(var b=a.loss.steps,c=[],d=0;d<b.length;d++)b[d].selected&&c.push({stepId:b[d].stepId,durationId:b[d].durationId,qty:b[d].qty,standartStep:b[d].standartStep});b={};angular.copy(a.loss,b);b.steps=c;console.log("serverLoss: "+b);b.discardedParts=a.discardedParts;a.loss.otherCosts=a.otherCosts;b.otherCosts=a.otherCosts;f.post("/loss/api/production/save",b).success(function(a){a&&k.go("losses.view",{id:a})})};setTimeout(function(){a.validator.validate()},1E3)};newProductionLossController.$inject="$controller $scope $http commonSelectionOptions commonDataSourceService $state".split(" ");angular.module("ykyLossApp").controller("newProductionLossController",newProductionLossController);

var ykyApproveModalController=function(a,b,c,d,e,g,f){a.sqpNo="";a.supplierNo="";a.fieldVisible="QUALITY_LAB"==e?!0:!1;a.sqpInputDisabled=!1;a.isSuppChainProject=!1;a.suppliers=[];a.lossCodes=f.getLossCodes();c.post("/common/api/supplier-from-disegno",d).success(function(b){a.suppliers=b});a.ok=function(){b.close({sqpNo:a.sqpNo,supplierNo:a.supplierNo,isSuppChain:a.isSuppChainProject,lossCodeId:a.lossCodeId})};a.cancel=function(){b.dismiss("cancel")}};ykyApproveModalController.$inject="$scope $modalInstance $http disegno lossType willSqpOpen commonDataSourceService".split(" ");angular.module("ykyLossApp").controller("ykyApproveModalController",ykyApproveModalController);

var ykyCancelLossModal=function(a,b){a.ok=function(){b.close(a.cancelDesc)};a.cancel=function(){b.dismiss()}};ykyCancelLossModal.$inject=["$scope","$modalInstance"];angular.module("ykyLossApp").controller("ykyCancelLossModal",ykyCancelLossModal);

var ykyPauseLossModal=function(a,b,c){a.ok=function(){b.close()};a.cancel=function(){b.dismiss()};a.isLossPaused=function(){return c}};ykyPauseLossModal.$inject=["$scope","$modalInstance","paused"];angular.module("ykyLossApp").controller("ykyPauseLossModal",ykyPauseLossModal);

var ykyInCompletedLossesController=function(b,a){b.losses=[];a.get("/production-loss/api/list-in-completed").success(function(a){b.losses=a})};ykyInCompletedLossesController.$inject=["$scope","$http"];angular.module("ykyLossApp").controller("ykyInCompletedLossesController",ykyInCompletedLossesController);

var ykyLossesListLogisticsController=function(a,b){a.gridOptions={autoBind:!1,dataSource:{type:"json",transport:{read:function(a){b.get("/common/api/loss-listing/logistics").success(function(b){a.success(b)})}},pageSize:10},columns:[{field:"id",title:"{{'lossId'| translate}}",filterable:!0},{field:"description",title:"{{'description'| translate}}",filterable:!0},{field:"lossType",title:"{{'lossType'| translate}}",filterable:!0},{field:"lossDate",title:"{{'lossDate'| translate}}",filterable:!0},{field:"lossState",title:"{{'lossState'| translate}}",filterable:!0},{field:"supplierCode",title:"{{'supplierCode'| translate}}",filterable:!0},{field:"supplierName",title:"{{'supplierName'| translate}}",filterable:!0},{field:"qty",title:"{{'qty'| translate}}",filterable:!0},{field:"sqpNo",title:"{{'sqpNo'| translate}}",filterable:!0}]};a.searchParams={};a.listLogisticsLoss=function(){a.logisticsLossList.dataSource.read()}};ykyLossesListLogisticsController.$inject=["$scope","$http"];angular.module("ykyLossApp").controller("ykyLossesListLogisticsController",ykyLossesListLogisticsController);

var ykyLossViewController=function(a,e,c,d,g,f,k){void 0==a.isDetailCalled?(a.isDetailCalled=0,a.totalLossCost=0,a.loss={},a.type="",a.approveButtonActive=!0,a.shiftCodes=[],a.completion={},a.objectionTypes=[],a.blueCollarWage=function(){return k.getBlueCollarWage()},d.get("/common/api/objection-types").success(function(b){a.objectionTypes=b})):a.isDetailCalled++;0==a.isDetailCalled&&d.get("/loss/api/type/"+c.id).success(function(b){b?(a.type=b,a.approveButtonActive=!0,"QUALITY"==b?(e.go("losses.view.quality",{id:c.id}),d.get("/loss/api/quality/get/"+c.id).success(function(b){b||e.go("losses.notFound",{id:c.id});a.loss=b})):"PRODUCTION"==b?(e.go("losses.view.production",{id:c.id}),d.get("/loss/api/production/get/"+c.id).success(function(b){b||e.go("losses.notFound",{id:c.id});a.loss=b})):"LOGISTICS"==b?(e.go("losses.view.logistic",{id:c.id}),d.get("/loss/api/logistic/get/"+c.id).success(function(b){b||e.go("losses.notFound",{id:c.id});a.loss=b})):"QUALITY_LAB"==b?(e.go("losses.view.qualityLab",{id:c.id}),d.get("/loss/api/quality-lab/get/"+c.id).success(function(b){b||e.go("losses.notFound",{id:c.id});b.qualityLabApprover&&(b.qualityLabApprover.approverRoleName=a.getApproverRoleName(b.qualityLabApprover.approverRole));a.loss=b})):"PRESS"==b&&(e.go("losses.view.press",{id:c.id}),d.get("/loss/api/press/get/"+c.id).success(function(b){b||e.go("losses.notFound",{id:c.id});a.loss=b}))):e.go("losses.notFound",{id:c.id})});a.getApproverRoleName=function(a){if(a.includes("DESK"))return"Montaj Masası";if(a.includes("SAMPLE"))return"Numune Masası";if(a.includes("AFTERSALES"))return"Satış Sonrası Masası";if(a.includes("SUSPENSION"))return"Süspansiyon Masası";if(a.includes("BODY"))return"Gövde Masası"};a.refreshState=function(){e.go("losses.view",{id:a.loss.id},{reload:!0})};a.getLossStateClass=function(){if(a.loss){if(a.isLossHaveAnyOpenObjection())return"pull-right label label-danger";if("OPEN"===a.loss.currentState||"PAUSED"===a.loss.currentState)return"pull-right label label-warning";if("APPROVED"===a.loss.currentState)return"pull-right label label-info";if("INVOICE_APPROVED"===a.loss.currentState)return"pull-right label label-primary";if("INVOICED"===a.loss.currentState||"PRESS_CLOSED"===a.loss.currentState||"EX_FIRM_NOT_INVOICED"===a.loss.currentState)return"pull-right label label-success";if("CANCELED"===a.loss.currentState)return"pull-right label label-danger";if("SUPP_CHAIN"===a.loss.currentState)return"pull-right label label-default"}else return""};a.isLossHaveAnyOpenObjection=function(){return a.loss&&a.loss.currentObjection&&"OPEN"===a.loss.currentObjection.objectionStatus};a.isLossPausable=function(){return a.loss&&("APPROVED"===a.loss.currentState||"INVOICE_APPROVED"===a.loss.currentState||"PAUSED"===a.loss.currentState)&&f.hasRole("TFG_YKY_ADMIN")};a.isLossPaused=function(){return a.loss&&"PAUSED"===a.loss.currentState};a.pauseLoss=function(){a.isLossPausable()&&g.open({templateUrl:"/ng/view/yky/loss/common/edit/pause-loss-modal.html",controller:"ykyPauseLossModal",resolve:{paused:function(){return a.isLossPaused()}}}).result.then(function(){d.post("/loss/api/pause/"+
a.loss.id).success(function(a){e.reload()})})};a.isLossCancelable=function(){return a.loss&&(("APPROVED"==a.loss.currentState||"OPEN"==a.loss.currentState||"PAUSED"==a.loss.currentState)&&(f.hasAnyRole(["TFG_YKY_APPROVAL_QUALITY","TFG_YKY_APPROVAL_LOGISTICS","TFG_YKY_ADMIN"])||"PRESS"==a.loss.lossType&&f.hasAnyRole(["TFG_YKY_PRESS_USER"]))||"OPEN"==a.loss.currentState&&f.hasAnyRole(["TFG_YKY_APPROVAL_QUALITY","TFG_YKY_APPROVAL_LOGISTICS","TFG_YKY_ADMIN"])||"INVOICE_APPROVED"==a.loss.currentState&&f.hasRole("TFG_YKY_ADMIN"))};a.cancelLoss=function(){a.isLossCancelable()&&g.open({templateUrl:"/ng/view/yky/loss/common/edit/cancel-loss-modal.html",controller:"ykyCancelLossModal"}).result.then(function(b){d.post("/loss/api/cancel/"+a.loss.id,b).success(function(a){e.reload()})},void 0)};var m="TFG_YKY_ADMIN TFG_YKY_BUYER TFG_YKY_REF TFG_YKY_LC_PRODUCTION TFG_YKY_DURATION_DEF TFG_YKY_DEVELOPER TFG_YKY_LC_LOGISTICS TFG_YKY_APPROVAL_QUALITY TFG_YKY_APPROVAL_LOGISTICS TFG_YKY_LC_QUALITY TFG_YKY_LC_QUALITY_LAB TFG_YKY_SUPPLIER".split(" ");a.canAttachFile=function(){return f.hasAnyRole(m)};a.attachNewFile=function(){g.open({templateUrl:"/ng/view/yky/loss/common/view/add-attachment-later.html",controller:"ykyLossViewAttachmentController"}).result.then(function(){d.get("/loss/api/persist-files/"+a.loss.id).success(function(b){a.refreshState()})},function(){d.get("/loss/api/delete-cached").success(function(a){})})};a.showApproval=function(){if(a.loss&&"QUALITY_LAB"!==a.loss.lossType){if(a.loss&&a.loss.lossSource&&!a.isLossApproved()&&!a.doesLossHaveUnpricedDiscard()){if("L"==a.loss.lossSource.shortName)return f.hasRole("TFG_YKY_APPROVAL_LOGISTICS");if("K"==a.loss.lossSource.shortName)return f.hasRole("TFG_YKY_APPROVAL_QUALITY")}}else if(a.loss&&"QUALITY_LAB"===a.loss.lossType&&"APPROVED"!==a.loss.currentState){if(a.loss.qualityLabApprover){var b=!1;f.getRoles().forEach(function(l){l==a.loss.qualityLabApprover.approverRole&&(b=!0)});return b}return!0}return!1};a.doesLossHaveUnpricedDiscard=function(){if(a.loss&&a.loss.discardedParts&&0<a.loss.discardedParts.length)for(var b=0;b<a.loss.discardedParts.length;b++)if(null==a.loss.discardedParts[b].basePrice)return!0;return!1};a.isLossApproved=function(){if(a.loss&&a.loss.stateChanges)for(var b=0;b<a.loss.stateChanges.length;b++)if("APPROVED"==a.loss.stateChanges[b].lossState)return!0;return!1};a.insertComment=function(b){d.post("/loss/api/add-comment/",{message:b,lossId:a.loss.id}).success(function(b){b&&a.refreshState()})};a.approveLossModal=function(){g.open({templateUrl:"/ng/view/yky/loss/production/approveModal.html",controller:"ykyApproveModalController",resolve:{disegno:function(){return a.loss.part.disegno},lossType:function(){return a.loss.lossType},willSqpOpen:function(){return a.loss.willSqpOpen}}}).result.then(function(b){"QUALITY_LAB"!==a.loss.lossType?b.sqpNo&&b.supplierNo&&a.loss.id&&d.get("/loss/api/approve/"+a.loss.id+"/"+b.sqpNo+"/"+b.supplierNo+"/"+b.isSuppChain+"/"+b.lossCodeId).success(function(b){a.refreshState()}):b.sqpNo?d.get("/loss/api/approve/"+a.loss.id+"/"+b.sqpNo).success(function(b){a.refreshState()}):d.get("/loss/api/approve/"+a.loss.id).success(function(b){a.refreshState()})},void 0)};a.updateShiftCodes=function(){d.get("/common/api/shift-codes/"+a.completion.completedTut).success(function(b){a.shiftCodes=b})};a.getAllTuts=function(){var b=[];b.push(a.loss.tut.tut);angular.forEach(a.loss.effectedTuts,function(a,d){b.push(a)});return b};a.getCompletableSteps=function(){var b=[];angular.forEach(a.loss.standartDurations,function(a,d){var c=a.stdStep;c.combinedId="s"+c.id;c.maxCompletableQty=a.qty;b.push(c)});angular.forEach(a.loss.stepDurations,function(a,d){var c=a.step;c.combinedId=c.id;c.maxCompletableQty=a.qty;b.push(c)});return b};a.getMaximumCompletionQty=function(){if(a.loss&&a.completion&&a.completion.completionStepId){for(var b=0,c=a.getCompletableSteps(),d=0;d<c.length;d++){var e=c[d];if(e.combinedId==a.completion.completionStepId){var b=e.maxCompletableQty,e=a.completion.completionStepId,f=0;"s"==a.completion.completionStepId.charAt(0)&&(f=1,e=a.completion.completionStepId.substring(1));for(var g=0;g<a.loss.lossCompletions.length;g++){var h=a.loss.lossCompletions[g];h.completionStepId==e&&f==h.completionStepIsStd&&(b-=h.completionQty)}}}return b}return 0};a.addCompletion=function(){a.completion.lossId=a.loss.id;a.completion.completionDuration=void 0;a.completion.completionStepIsStd=0;"s"==a.completion.completionStepId.charAt(0)&&(a.completion.completionStepId=a.completion.completionStepId.substring(1),a.completion.completionStepIsStd=1);d.post("/loss/api/add-completion",a.completion).success(function(b){b&&a.refreshState()})};a.isLossCompleted=function(){if(a.loss){var b=a.getTotalCompletedQty();if(a.getTotalCompletableQty()>b)return!1}return!0};a.getTotalCompletableQty=function(){var b=0;angular.forEach(a.loss.standartDurations,function(a,c){b+=a.qty});angular.forEach(a.loss.stepDurations,function(a,c){b+=a.qty});return b};a.getTotalCompletedQty=function(){var b=0;angular.forEach(a.loss.lossCompletions,function(a,c){b+=a.completionQty});return b};a.canSeeLossCompletion=function(){return f.hasAnyRole(["TFG_YKY_LC_PRODUCTION","TFG_YKY_APPROVAL_QUALITY","TFG_YKY_APPROVAL_LOGISTICS"])};a.doObjection=function(b){b.lossId=a.loss.id;b.lossType=a.loss.lossType;d.post("/supplier/api/make-objection",b).success(function(b){e.go("losses.view",{id:a.loss.id},{reload:!0})})};a.canUserSetObjection=function(a){var c=f.getUserName();if(a&&a.objectionType.responsibles){debugger;console.log(a);if(0<=a.objectionType.responsibles.indexOf(c)&&"OPEN"==a.objectionStatus)return!0}return!1};a.setObjectionResult=function(){var b=a.loss,c=a.objectionTypes;g.open({templateUrl:"/ng/view/yky/loss/common/view/set-objection-result.html",controller:"ykyObjectionModalController",resolve:{loss:function(){return b},objectionTypes:function(){return c}}}).result.then(function(b){b&&(b.isChange?a.changeObjection(b.newObjection):(b.objectionResult.lossId=a.loss.id,a.saveObjectionResult(b.objectionResult)))},function(){console.log("canceled")})};a.changeObjection=function(b){b.objectionInstanceId=a.loss.currentObjection.id;d.post("/refree/api/change-objection",b).success(function(b){a.refreshState()})};a.saveObjectionResult=function(b){b.objectionInstanceId=a.loss.currentObjection.id;b.status="1"==b.result;d.post("/refree/api/set-objection-result",b).success(function(b){a.refreshState()})};a.showObjectionPanel=function(){return a.loss&&a.loss.objections&&a.loss.objections.length||f.hasRole("TFG_YKY_SUPPLIER")};a.showAttachmentsPanel=function(){return a.loss&&a.loss.attachments&&a.loss.attachments.length};a.approvePress=function(){g.open({templateUrl:"/ng/view/yky/loss/press/approve-modal.html",controller:"ykyPressApproveModalController",resolve:{loss:function(){return a.loss}}}).result.then(function(b){d.post("/loss/press/api/approve/"+a.loss.id,a.loss.details).success(function(a){e.reload()})})}};ykyLossViewController.$inject="$scope $state $stateParams $http $modal tfAuthService commonDataSourceService".split(" ");angular.module("ykyLossApp").controller("ykyLossViewController",ykyLossViewController);

var ykyLossViewNavbarController=function(a,b){a.viewLoss=function(){a.lossId&&b.go("losses.view",{id:a.lossId},{reload:!0})}};ykyLossViewNavbarController.$inject=["$scope","$state"];angular.module("ykyLossApp").controller("ykyLossViewNavbarController",ykyLossViewNavbarController);

var ykyLossesNotFoundController=function(a,b){a.lossId=b.id};ykyLossesNotFoundController.$inject=["$scope","$stateParams"];angular.module("ykyLossApp").controller("ykyLossesNotFoundController",ykyLossesNotFoundController);

var ykyObjectionModalController=function(a,d,c,b){a.loss=c;a.objectionTypes=b;a.objectionResult={};a.newObjection={};c=-1;for(b=0;b<a.objectionTypes.length;b++)if(a.objectionTypes[b].id==a.loss.currentObjection.objectionType.id){c=b;break}0<=c&&a.objectionTypes.splice(c,1);a.changeObjectionType=function(){d.close({isChange:!0,newObjection:a.newObjection})};a.saveResult=function(){d.close({isChange:!1,objectionResult:a.objectionResult})};a.cancel=function(){d.dismiss("canceled")}};ykyObjectionModalController.$inject=["$scope","$modalInstance","loss","objectionTypes"];angular.module("ykyLossApp").controller("ykyObjectionModalController",ykyObjectionModalController);

var ykyUnApprovedLossesController=function(b,a){b.losses=[];a.get("/production-loss/api/list-non-approved").success(function(a){b.losses=a})};ykyUnApprovedLossesController.$inject=["$scope","$http"];angular.module("ykyLossApp").controller("ykyUnApprovedLossesController",ykyUnApprovedLossesController);

angular.module("ykyBuyerApp",["ykyBuyerControllers"]).config(["$stateProvider",function(a){a.state("buyer",{url:"/buyer",templateUrl:"/ng/view/yky/buyer/index.html",ncyBreadcrumb:{label:"{{'buyer'|translate}}"},data:{roles:["TFG_YKY_BUYER"]}}).state("buyer.unPricedParts",{url:"/un-priced-parts",templateUrl:"/ng/view/yky/buyer/un-priced-parts.html",controller:"ykyBuyerUnPricedPartsController",ncyBreadcrumb:{label:"{{'unPricedParts'|translate}}"}}).state("buyer.unPricedParts.addPrice",{url:"/:id",templateUrl:"/ng/view/yky/buyer/add-price.html",controller:"ykyBuyerAddPricePartController",ncyBreadcrumb:{label:"{{'addPrice'|translate}}"}})}]);

var ykyBuyerUnPricedPartsController=function(a,b){a.unPricedParts=[];b.get("/buyer/api/d-parts-wo-base-price").success(function(b){a.unPricedParts=b})};ykyBuyerUnPricedPartsController.$inject=["$scope","$http"];var ykyBuyerAddPricePartController=function(a,b,c,d,e){a.suppliers=[];c.get("/buyer/api/get-discard-part/"+b.id).success(function(b){a.discardPart=b});a.supplierSelectOptions={dataSource:{transport:{read:{dataType:"json",url:e.getUrl("/buyer/api/get-suppliers")}}},dataTextField:"name",dataValueField:"sapCode",template:"#:data.sapCode# - #:data.name#",filter:"contains"};a.addPrice=function(){a.basePrice.id=b.id;c.post("/buyer/api/save-discard-part",a.basePrice).success(function(a){a&&d.go("buyer.unPricedParts",{},{reload:!0})})}};ykyBuyerAddPricePartController.$inject=["$scope","$stateParams","$http","$state","tfContextRootService"];angular.module("ykyBuyerControllers",[]).controller("ykyBuyerUnPricedPartsController",ykyBuyerUnPricedPartsController).controller("ykyBuyerAddPricePartController",ykyBuyerAddPricePartController);

angular.module("ykySupplierApp",["ykySupplierControllers"]).config(["$stateProvider",function(a){a.state("supplier",{url:"/supplier",templateUrl:"/ng/view/yky/supplier/index.html",ncyBreadcrumb:{label:"{{'supplier'|translate}}"},data:{roles:["TFG_YKY_SUPPLIER"]}}).state("supplier.openLogistics",{url:"/open/logistics",templateUrl:"/ng/view/yky/supplier/open/logistics.html",controller:"ykySupplierOpenLogisticsController",ncyBreadcrumb:{label:"{{'openLogisticsLosses'|translate}}"}}).state("supplier.openProduction",{url:"/open/production",templateUrl:"/ng/view/yky/supplier/open/production.html",controller:"ykySupplierOpenProductionsController",ncyBreadcrumb:{label:"{{'openProductionLosses'|translate}}"}}).state("supplier.openQuality",{url:"/open/quality",templateUrl:"/ng/view/yky/supplier/open/quality.html",controller:"ykySupplierOpenQualityController",ncyBreadcrumb:{label:"{{'openQualityLosses'|translate}}"}}).state("supplier.openQualityLab",{url:"/open/quality-lab",templateUrl:"/ng/view/yky/supplier/open/quality-lab.html",controller:"ykySupplierOpenQualityLabController",ncyBreadcrumb:{label:"{{'openQualityLabLosses'|translate}}"}})}]);

var ykySupplierOpenLogisticsController=function(b,a){b.openLosses=[];a.get("/supplier/api/open/logistics").success(function(a){b.openLosses=a})};ykySupplierOpenLogisticsController.$inject=["$scope","$http"];var ykySupplierOpenProductionsController=function(b,a){b.openLosses=[];a.get("/supplier/api/open/production").success(function(a){b.openLosses=a})};ykySupplierOpenProductionsController.$inject=["$scope","$http"];var ykySupplierOpenQualityController=function(b,a){b.openLosses=[];a.get("/supplier/api/open/quality").success(function(a){b.openLosses=a})};ykySupplierOpenQualityController.$inject=["$scope","$http"];var ykySupplierOpenQualityLabController=function(b,a){b.openLosses=[];a.get("/supplier/api/open/quality-lab").success(function(a){b.openLosses=a})};ykySupplierOpenQualityLabController.$inject=["$scope","$http"];angular.module("ykySupplierControllers",[]).controller("ykySupplierOpenLogisticsController",ykySupplierOpenLogisticsController).controller("ykySupplierOpenProductionsController",ykySupplierOpenProductionsController).controller("ykySupplierOpenQualityController",ykySupplierOpenQualityController).controller("ykySupplierOpenQualityLabController",ykySupplierOpenQualityLabController);

angular.module("ykyRefreeApp",["ykRefreeControllers"]).config(["$stateProvider",function(a){a.state("objections",{url:"/objections",templateUrl:"/ng/view/yky/refree/index.html",controller:"ykyRefreeHomeController",ncyBreadcrumb:{label:"{{'objections'|translate}}"},data:{roles:["TFG_YKY_REF"]}}).state("objections.all",{url:"/all",templateUrl:"/ng/view/yky/refree/list.html",controller:"ykyRefreeAllController",ncyBreadcrumb:{label:"{{'allObjections'|translate}}"}}).state("objections.my",{url:"/my",templateUrl:"/ng/view/yky/refree/list.html",controller:"ykyRefreeMyController",ncyBreadcrumb:{label:"{{'myObjections'|translate}}"}})}]);

var ykyRefreeHomeController=function(a,c){a.totalObjected=0;a.totalMyObjected=0;c.get("/refree/api/total-objected").success(function(b){a.totalObjected=b});c.get("/refree/api/total-my-objected").success(function(b){a.totalMyObjected=b})};ykyRefreeHomeController.$inject=["$scope","$http"];var ykyRefreeAllController=function(a,c){a.objections=[];c.get("/refree/api/list-open-objections").success(function(b){a.objections=b})};ykyRefreeAllController.$inject=["$scope","$http"];var ykyRefreeMyController=function(a,c){a.objections=[];c.get("/refree/api/list-open-my-objections").success(function(b){a.objections=b})};ykyRefreeMyController.$inject=["$scope","$http"];angular.module("ykRefreeControllers",[]).controller("ykyRefreeHomeController",ykyRefreeHomeController).controller("ykyRefreeAllController",ykyRefreeAllController).controller("ykyRefreeMyController",ykyRefreeMyController);

angular.module("ykyReportsApp",["pressReportControllers"]).config(["$stateProvider",function(a){a.state("reports",{url:"/reports",templateUrl:"/ng/view/yky/report/index.html",ncyBreadcrumb:{label:"{{'reports'|translate}}"},data:{roles:"TFG_YKY_REPORT TFG_YKY_SUPPLIER TFG_YKY_LC_PRODUCTION TFG_YKY_LC_LOGISTICS TFG_YKY_APPROVAL_QUALITY TFG_YKY_APPROVAL_LOGISTICS TFG_YKY_LC_QUALITY TFG_YKY_LC_QUALITY_LAB TFG_YKY_PRESS_USER".split(" ")}}).state("reports.mainReport",{url:"/main-report",controller:"ykyMainReportController",templateUrl:"/ng/view/yky/report/main-report.html",ncyBreadcrumb:{label:"{{'mainReport'|translate}}"},data:{roles:"TFG_YKY_REPORT TFG_YKY_SUPPLIER TFG_YKY_LC_PRODUCTION TFG_YKY_LC_LOGISTICS TFG_YKY_APPROVAL_QUALITY TFG_YKY_APPROVAL_LOGISTICS TFG_YKY_LC_QUALITY TFG_YKY_LC_QUALITY_LAB TFG_YKY_PRESS_USER".split(" ")}}).state("reports.discardedParts",{url:"/discarded-parts",controller:"discardedPartReportController",templateUrl:"/ng/view/yky/report/discarded-parts.html",ncyBreadcrumb:{label:"{{'discardedPartsReport'|translate}}"},data:{roles:["TFG_YKY_ADMIN","TFG_YKY_REPORT"]}}).state("reports.supplierBased",{url:"/supplier-based",controller:"ykySupplierBasedReportController",templateUrl:"/ng/view/yky/report/supplier-based.html",ncyBreadcrumb:{label:"{{'supplierBasedReport'|translate}}"},data:{roles:["TFG_YKY_ADMIN"]}}).state("reports.invoiceReadyReport",{url:"/invoice-ready",controller:"ykyInvoiceReadyReportController",templateUrl:"/ng/view/yky/report/invoice-ready.html",ncyBreadcrumb:{label:"{{'invoiceReadyLosses'|translate}}"},data:{roles:["TFG_YKY_ADMIN"]}}).state("reports.previousInvoices",{url:"/previous-invoices",controller:"ykyPreviousInvoicesController",templateUrl:"/ng/view/yky/report/previous-invoices.html",ncyBreadcrumb:{label:"{{'previousInvoices'|translate}}"},data:{roles:["TFG_YKY_ADMIN"]}}).state("reports.efficiency",{url:"/efficency",controller:"ykyEfficiencyController",templateUrl:"/ng/view/yky/report/efficiency.html",ncyBreadcrumb:{label:"{{'efficiencyReport'|translate}}"},data:{roles:["TFG_YKY_ADMIN"]}}).state("reports.press",{url:"/press",templateUrl:"/ng/view/yky/report/press/index.html",ncyBreadcrumb:{label:"{{'pressReports'|translate}}"},data:{roles:["TFG_YKY_PRESS_USER"]}}).state("reports.press.quality",{url:"/quality",controller:"pressQualityReportController",templateUrl:"/ng/view/yky/report/press/press-quality.html",ncyBreadcrumb:{label:"{{'pressQualityReports'|translate}}"}}).state("reports.press.logistics",{url:"/logistics",controller:"pressLogisticsReportController",templateUrl:"/ng/view/yky/report/press/press-logistics.html",ncyBreadcrumb:{label:"{{'pressLogisticsReports'|translate}}"}}).state("reports.press.details",{url:"/details",controller:"pressDetailsReportController",templateUrl:"/ng/view/yky/report/press/press-details.html",ncyBreadcrumb:{label:"{{'pressDetailsReports'|translate}}"}}).state("reports.press.dashboard",{url:"/dashboard",controller:"pressDashboardController",templateUrl:"/ng/view/yky/report/press/dashboard.html",ncyBreadcrumb:{label:"{{'pressDashboard'|translate}}"}}).state("reports.lossDetailReport",{url:"/loss-detail-report",controller:"lossDetailReportController",templateUrl:"/ng/view/yky/report/loss-detail-report.html",ncyBreadcrumb:{label:"{{'lossDetailReport'|translate}}"},data:{roles:"TFG_YKY_REPORT TFG_YKY_SUPPLIER TFG_YKY_LC_PRODUCTION TFG_YKY_LC_LOGISTICS TFG_YKY_APPROVAL_QUALITY TFG_YKY_APPROVAL_LOGISTICS TFG_YKY_LC_QUALITY TFG_YKY_LC_QUALITY_LAB TFG_YKY_PRESS_USER".split(" ")}}).state("reports.sqpReport",{url:"/sqp-report",controller:"sqpReportController",templateUrl:"/ng/view/yky/report/sqp-report.html",ncyBreadcrumb:{label:"{{'sqpReport'|translate}}"},data:{roles:"TFG_YKY_REPORT TFG_YKY_SUPPLIER TFG_YKY_LC_PRODUCTION TFG_YKY_LC_LOGISTICS TFG_YKY_APPROVAL_QUALITY TFG_YKY_APPROVAL_LOGISTICS TFG_YKY_LC_QUALITY TFG_YKY_LC_QUALITY_LAB TFG_YKY_PRESS_USER".split(" ")}})}]);

var ykyEfficiencyController=function(c,e,d){c.searchParams={};c.efficiencyReportGridOptions={toolbar:[{name:"excel",text:"Excel"}],excel:{allPages:!0,fileName:"YSKY - Tedarikçi Bazlı Rapor.xlsx",filterable:!0},autoBind:!1,dataSource:{type:"json",transport:{read:function(f){e.post("/report/api/efficiency-report",c.searchParams).success(function(a){for(var b=0;b<a.length;b++)a[b].lossType=d.instant(a[b].lossType),a[b].lossSubType=d.instant(a[b].lossSubType);f.success(a)})}},pageSize:20},resizable:!0,sortable:!0,columns:[{field:"lossId",title:"Kayıp ID",width:50},{field:"lossType",title:"Kayıp Türü",width:50,filterable:{multi:!0}},{field:"lossSource",title:"Kayıp Kaynağı",width:50,filterable:{multi:!0}},{field:"lossDate",title:"Kayıp Tarihi",width:100},{field:"lossDescription",title:"Kayıp Açıklama",width:400},{field:"state",title:"Statü",width:50},{field:"stateDef",title:"Statü Açıklama",width:100},{field:"stateDate",title:"Statü Tarihi",width:100},{field:"tut",title:"TUT",width:50},{field:"shift",title:"Vardiya",width:50},{field:"duration",title:"Süre",width:50},{field:"finishDate",title:"Tamamlanma Tarihi",width:100},{field:"lossCode",title:"Kayıp Kodu",width:50},{field:"openDate",title:"Açılma Tarihi",width:100},{field:"approveDate",title:"Onaylanma Tarihi",width:100},{field:"invoiceDate",title:"Faturalanma Tarihi",width:100}]};c.search=function(){c.efficiencyReportGrid.dataSource.read()}};ykyEfficiencyController.$inject=["$scope","$http","$translate"];angular.module("ykyReportsApp").controller("ykyEfficiencyController",ykyEfficiencyController);

var ykyInvoiceReadyReportController=function(a,d,e){a.losses=[];a.selectAll=function(){angular.forEach(a.losses,function(a,c){a.checked=!0})};a.selectNone=function(){angular.forEach(a.losses,function(a,c){a.checked=!1})};a.refreshInvoices=function(){d.get("/report/api/invoice-ready-losses").success(function(b){a.losses=[];angular.forEach(b,function(c,b){c.checked=!1;a.losses.push(c)})})};a.getInvoice=function(){var b=[];angular.forEach(a.losses,function(a,d){a.checked&&(b=b.concat(a.lostIds))});e.download("/api/invoice/get-invoices",b)};a.refreshInvoices()};ykyInvoiceReadyReportController.$inject=["$scope","$http","tfDownloadService"];angular.module("ykyReportsApp").controller("ykyInvoiceReadyReportController",ykyInvoiceReadyReportController);

var ykyMainReportController=function(b,h,l,f,m,e,k){b.lossStates=[];b.reportData=[];b.searchParams={page:0,pageSize:5};h.get("/common/api/loss-states").success(function(d){b.lossStates=d});b.tutOptions=k.tutOptions();b.modelSelectionOptions=k.modelOptions();b.lossSources=e.getLossSources();b.approverRoles=e.getApproverRoles();b.lossTypes=e.getLossTypes();b.supplierSelectOptions=function(){return{dataSource:{data:e.getSuppliers()},dataTextField:"name",dataValueField:"sapCode",template:"#:data.sapCode# - #:data.name#",filter:"contains",optionLabel:"..."}};b.workTypes=[];h.get("/report/api/get-work-types").success(function(d){b.workTypes=d;b.mainReportData=new kendo.data.ObservableArray([]);var c=[{field:"id",title:"ID",width:80,template:function(a){return'\x3ca href\x3d"'+l.getUrl("/#/losses/view/"+a.id)+'" target\x3d"_blank"\x3e'+a.id+"\x3c/a\x3e"}},{field:"lossType",title:"Kayıp Türü",filterable:{multi:!0,search:!0},width:100},{field:"lossSubType",title:"Kayıp Birimi",filterable:{multi:!0,search:!0},width:100},{field:"description",title:"Kayıp Açıklaması",filterable:{multi:!0,search:!0},width:200},{field:"lossDate",title:"Kayıp Tarihi",filterable:{multi:!0,search:!0},width:120},{field:"insDate",title:"Kayıp Giriş Tarihi",filterable:{multi:!0,search:!0},width:150},{field:"approvalDate",title:"Onay Tarihi",filterable:{multi:!0,search:!0},width:150},{field:"approvalInsBy",title:"Onaylayan",filterable:{multi:!0,search:!0},width:150},{field:"qualityLabApprover",title:"Onaylayan Birim",filterable:{multi:!0,search:!0},width:150},{field:"lossState",title:"Kayıp Statü",filterable:{multi:!0,search:!0},width:180},{field:"objectionLossDate",title:"İtiraz Tarihi",filterable:{multi:!0,search:!0},width:180},{field:"model",title:"Model",filterable:{multi:!0,search:!0},width:80},{field:"disegno",title:"Resim No",filterable:!0,width:120},{field:"disegnoDesc",title:"Resim Açıklama",width:200},{field:"disegnoTableCode",title:"Masa No",width:80},{field:"sqpNo",title:"SQP No",width:120},{field:"supplierCode",title:"Tedarikçi Kodu",filterable:{multi:!0,search:!0},width:80},{field:"supplierName",title:"Tedarikçi Adı",filterable:{multi:!0,search:!0},width:200},{field:"tut",title:"TUT",filterable:!0,width:120},{field:"lossSource",title:"Kayıp Kaynağı",filterable:!0,width:120},{field:"insertedBy",title:"Kaybı Açan Kul.",filterable:{multi:!0,search:!0},width:120},{field:"usrDept",title:"Kaybı Açan Dep.",filterable:{multi:!0,search:!0},width:200}];angular.forEach(d,function(a,b){c.push({field:'durationDetails["'+a+'"]',title:a+" (dk)",sorting:!0,aggregates:["sum"],groupFooterTemplate:"#\x3d sum #",width:100,attributes:{style:"text-align: right;"}})});c.push({field:"totalDuration",title:"Toplam Süre (dk)",aggregates:["sum"],groupFooterTemplate:"#\x3d sum #",width:100,attributes:{style:"text-align: right;"}});angular.forEach(d,function(a,b){c.push({field:'costDetails["'+a+'"]',title:a+" ₺",sorting:!0,template:"#\x3d kendo.toString(costDetails['"+a+"'], '0.00') # ₺",aggregates:["sum"],groupFooterTemplate:"#\x3d kendo.toString(sum, '0.00') # ₺",width:100,attributes:{style:"text-align: right;"}})});c.push({field:"totalCostOfWorkTypes",title:"Toplam Çalışma Türleri Tutarı ₺",template:"#\x3d kendo.toString(totalCostOfWorkTypes, '0.00') # ₺",aggregates:["sum"],groupFooterTemplate:"#\x3d kendo.toString(sum, '0.00') # ₺",width:100,attributes:{style:"text-align: right;"}});c.push({field:"qLabTestCost",title:"Kalite Lab. Tutar",template:"#\x3d kendo.toString(qLabTestCost, '0.00') # ₺",aggregates:["sum"],groupFooterTemplate:"#\x3d kendo.toString(sum, '0.00') # ₺",width:100,attributes:{style:"text-align: right;"}});c.push({field:"discardedPartCost",title:"Iskarta Parça Tutar",template:"#\x3d kendo.toString(discardedPartCost, '0.00') # ₺",aggregates:["sum"],groupFooterTemplate:"#\x3d kendo.toString(sum, '0.00') # ₺",width:100,attributes:{style:"text-align: right;"}});c.push({field:"otherCosts",title:"Diğer Masraflar",template:"#\x3d kendo.toString(otherCosts, '0.00') # ₺",aggregates:["sum"],groupFooterTemplate:"#\x3d kendo.toString(sum, '0.00') # ₺",width:100,attributes:{style:"text-align: right;"}});c.push({field:"totalCost",title:"Toplam Tutar ₺",template:"#\x3d kendo.toString(totalCost, '0.00') # ₺",aggregates:["sum"],groupFooterTemplate:"#\x3d kendo.toString(sum, '0.00') # ₺",width:100,attributes:{style:"text-align: right;"}});b.mainReportGridOptions={toolbar:[{name:"excel",text:"Excel"}],excel:{allPages:!0,fileName:"YSKY - Ana Rapor.xlsx",filterable:!0},autoBind:!1,dataSource:{type:"json",data:b.mainReportData,pageSize:5},resizable:!0,groupable:!0,reorderable:!0,pageable:{pageSizes:!0},filterable:!0,columnMenu:!0,columns:c}});b.searchReport=function(){console.log("$scope.searchParams: ",b.searchParams);h.post("/report/api/main-report",b.searchParams).success(function(d){for(var c=0;c<d.length;c++){var a=d[c];a.lossType=f.instant(a.lossType);a.lossSubType=f.instant(a.lossSubType);var e=f.instant(a.lossState),g=f.instant(a.objectionStatus);"CANCELED"==a.lossState&&6!=a.lossStateChanger.length&&"T"!=a.lossStateChanger.charAt(0)&&(e+=" (Sistem)");null==a.objectionStatus?g="Firma İtirazı Yok":"APPROVED"==a.lossState&&"OPEN"==a.objectionStatus?g="İtiraza Cevap Bekleniyor":"CANCELED"==a.lossState&&"ACCEPT"==a.objectionStatus&&6!=a.lossStateChanger.length&&"T"!=a.lossStateChanger.charAt(0)&&(g+=" (Sistem)");a.objectionStatus=f.instant(a.objectionStatus);a.lossState=e;a.objectionStatus=g}b.mainReportData.splice(0,b.mainReportData.length);b.mainReportData.push.apply(b.mainReportData,d);b.mainReportGrid.dataSource.data(b.mainReportData)})}};ykyMainReportController.$inject="$scope $http tfContextRootService $translate $q commonDataSourceService commonSelectionOptions".split(" ");angular.module("ykyReportsApp").controller("ykyMainReportController",ykyMainReportController);

var ykyPreviousInvoicesController=function(a,b,c){a.invoices=[];b.get("/api/invoice/list-previous").success(function(d){a.invoices=d});a.download=function(a){c.download("/api/invoice/get-previous/"+a,void 0)}};ykyPreviousInvoicesController.$inject=["$scope","$http","tfDownloadService"];angular.module("ykyReportsApp").controller("ykyPreviousInvoicesController",ykyPreviousInvoicesController);

var ykySupplierBasedReportController=function(a,c,e){a.searchParams={};a.workTypes=[];a.supplierTypesOptions={dataSource:{type:"json",transport:{read:{url:e.getUrl("/report/api/supplier-types")}}}};c.get("/report/api/get-work-types").success(function(d){a.workTypes=d;var b=[{field:"supplierCode",title:"Tedarikçi Kodu",filterable:{multi:!0},width:100},{field:"supplierName",title:"Tedarikçi",filterable:{multi:!0}},{field:"lossIds",title:"Kayıp ID'leri",filterable:!1},{field:"totalDuration",title:"Süre Detayı",width:100,columns:[]},{field:"totalCost",title:"Tutar Detayı",template:"#\x3d kendo.toString(totalCost, '0.00') # ₺",width:100,columns:[{field:"totalCost",title:"Çalışma Türleri",columns:[]},{field:"qLabTestCost",title:"Kalite Lab. Tutarı",template:"#\x3d kendo.toString(qLabTestCost, '0.00') # ₺"},{field:"discardedPartCost",title:"Iskarta Parça Tutarı",template:"#\x3d kendo.toString(discardedPartCost, '0.00') # ₺"}]}];angular.forEach(d,function(a,c){b[3].columns.push({field:'durationDetails["'+a+'"]',title:a,sorting:!0});b[4].columns[0].columns.push({field:'costDetails["'+a+'"]',title:a,sorting:!0,template:"#\x3d kendo.toString(costDetails['"+a+"'], '0.00') # ₺"})});b[3].columns.push({field:"totalDuration",title:"Toplam Süre"});b[4].columns[0].columns.push({field:"totalCostOfWorkTypes",title:"Toplam Çalışma Türleri Tutarı",template:"#\x3d kendo.toString(totalCostOfWorkTypes, '0.00') # ₺"});b[4].columns.push({field:"totalCost",title:"Toplam Tutar",template:"#\x3d kendo.toString(totalCost, '0.00') # ₺"});a.supplierBasedGridOptions={toolbar:[{name:"excel",text:"Excel"}],excel:{allPages:!0,fileName:"YSKY - Tedarikçi Bazlı Rapor.xlsx",filterable:!0},autoBind:!1,dataSource:{type:"json",transport:{read:function(b){c.post("/report/api/supplier-based-report",a.searchParams).success(function(a){b.success(a)})}},pageSize:15},resizable:!0,sortable:!0,columns:b}});a.searchReport=function(){a.supplierBasedGrid.dataSource.read()}};ykySupplierBasedReportController.$inject=["$scope","$http","tfContextRootService"];angular.module("ykyReportsApp").controller("ykySupplierBasedReportController",ykySupplierBasedReportController);

var discardedPartReportController=function(a,d,f,e){a.searchParams={};a.lossStates=[];a.lossTypes=f.getLossTypes();a.subTypes=[];d.get("/common/api/loss-states").success(function(c){a.lossStates=c});d.get("/common/api/production-sub-loss-types").success(function(c){a.subTypes=c});a.searchReport=function(){a.discardedPartsGrid.dataSource.read()};a.discardedPartsGridOptions={toolbar:[{name:"excel",text:"Excel"}],excel:{allPages:!0,fileName:"YSKY - Iskarta Parca Rapor.xlsx",filterable:!0},autoBind:!1,dataSource:{transport:{read:function(c){d.post("/report/api/discarded-part-report",a.searchParams).success(function(a){for(var b=0;b<a.length;b++)a[b].lossType=e.instant(a[b].lossType),a[b].lossState=e.instant(a[b].lossState),a[b].subType=e.instant(a[b].subType);c.success(a)})}},pageSize:20},resizable:!0,groupable:!0,pageable:{pageSizes:!0},filterable:!0,columnMenu:!0,reorderable:!0,columns:[{field:"disegno",title:"Resim No",width:140},{field:"discardVoucherNo",title:"Iskarta Fiş Numarası",width:140},{field:"qty",title:"Iskarta Parça Adedi",width:80},{field:"discardCost",title:"Iskarta Tutarı",template:"#\x3d kendo.toString(discardCost, '0.00') # ₺",attributes:{style:"text-align: right;"},width:100},{field:"lossId",title:"Kayip ID",attributes:{style:"text-align: right;"},width:100},{field:"lossDate",title:"Kayıp Tarihi",width:100},{field:"lossInsDate",title:"Kayıp Giriş Tarihi",width:140},{field:"lossState",title:"Kayıp Durumu",width:100},{field:"lastStateChanges",title:"Son Statü Değişikliği",width:140},{field:"lossType",title:"Kayıp Türü",width:100},{field:"description",title:"Kayıp Açıklama",width:180},{field:"subType",title:"Kayıp Birimi",width:180}]}};discardedPartReportController.$inject=["$scope","$http","commonDataSourceService","$translate"];angular.module("ykyReportsApp").controller("discardedPartReportController",discardedPartReportController);

var lossDetailReportController=function(a,g,k,e,l,d,h){a.lossStates=[];a.reportData=[];a.searchParams={};g.get("/common/api/loss-states").success(function(c){a.lossStates=c});a.tutOptions=h.tutOptions();a.modelSelectionOptions=h.modelOptions();a.lossSources=d.getLossSources();a.lossTypes=d.getLossTypes();console.log(a.lossTypes);a.supplierSelectOptions=function(){return{dataSource:{data:d.getSuppliers()},dataTextField:"name",dataValueField:"sapCode",template:"#:data.sapCode# - #:data.name#",filter:"contains",optionLabel:"..."}};a.lossDetailData=new kendo.data.ObservableArray([]);a.lossDetailReportGridOptions={toolbar:[{name:"excel",text:"Excel"}],excel:{allPages:!0,fileName:"YSKY - Kayip Rapor Detay.xlsx",filterable:!0},autoBind:!1,dataSource:{type:"json",data:a.lossDetailReportData,pageSize:5},resizable:!0,groupable:!0,reorderable:!0,pageable:{pageSizes:!0},filterable:!0,columnMenu:!0,columns:[{field:"id",title:"ID",width:80,template:function(a){return'\x3ca href\x3d"'+k.getUrl("/#/losses/view/"+a.id)+'" target\x3d"_blank"\x3e'+a.id+"\x3c/a\x3e"}},{field:"lossType",title:"Kayıp Türü",filterable:{multi:!0,search:!0},width:100},{field:"lossSubType",title:"Kayıp Birimi",filterable:{multi:!0,search:!0},width:100},{field:"description",title:"Kayıp Açıklaması",filterable:{multi:!0,search:!0},width:200},{field:"supplierCode",title:"Tedarikçi Kodu",filterable:{multi:!0,search:!0},width:80},{field:"supplierName",title:"Tedarikçi Adı",filterable:{multi:!0,search:!0},width:200},{field:"sqpNo",title:"SQP No",filterable:{multi:!0,search:!0},width:200},{field:"stepNameCached",title:"Step Name Cached",filterable:{multi:!0,search:!0},width:150},{field:"blueCollarWageCached",title:"blueCollarWageCached",filterable:{multi:!0,search:!0},width:150},{field:"qty",title:"Adet",filterable:{multi:!0,search:!0},width:150},{field:"stepDurationCached",title:"stepDurationCached",filterable:{multi:!0,search:!0},width:180}]};a.searchReport=function(){console.log("in searchReport function");g.post("/report/api/loss-detail-report",a.searchParams).success(function(c){console.log("in searchReport function post success");if(null==c)console.log("DATA NULL,loss-detail-report.js"),console.log(c);else{console.log("DATA not NULL,loss-detail-report.js");console.log(c);for(var d=0;d<c.length;d++){var b=c[d];b.lossType=e.instant(b.lossType);b.lossSubType=e.instant(b.lossSubType);var f=e.instant(b.lossState);"CANCELED"==b.lossState&&6!=b.lossStateChanger.length&&"T"!=b.lossStateChanger.charAt(0)&&(f+=" (Sistem)");b.lossState=f}a.lossDetailData.splice(0,a.lossDetailData.length);a.lossDetailData.push.apply(a.lossDetailData,c);a.lossDetailReportGrid.dataSource.data(a.lossDetailData)}})}};lossDetailReportController.$inject="$scope $http tfContextRootService $translate $q commonDataSourceService commonSelectionOptions".split(" ");angular.module("ykyReportsApp").controller("lossDetailReportController",lossDetailReportController);

var sqpReportController=function(a,c,e,f,g,h,d){a.reportData=[];a.searchParams={};a.modelSelectionOptions=d.modelOptions();a.sqpData=new kendo.data.ObservableArray([]);a.sqpReportGridOptions={toolbar:[{name:"excel",text:"Excel"}],excel:{allPages:!0,fileName:"YSKY - SQP_raporu.xlsx",filterable:!0},autoBind:!1,dataSource:{type:"json",data:a.sqpReportData,pageSize:10,group:{field:"sqp",aggregates:[{field:"totalCost",aggregate:"sum"}]}},resizable:!0,groupable:!0,reorderable:!0,pageable:{pageSizes:!0},filterable:!0,columnMenu:!0,columns:[{field:"sqp",title:"SQP",filterable:{multi:!0,search:!0},width:200},{field:"approvalInsBy",title:"Approval Ins. By",filterable:{multi:!0,search:!0},width:100},{field:"approvalDate",title:"Min. Approval Date",filterable:{multi:!0,search:!0},width:100},{field:"supplierName",title:"Supplier Name",filterable:{multi:!0,search:!0},width:100},{field:"costDetail",title:"Cost Detail",filterable:{multi:!0,search:!0},width:100},{field:"costItem",title:"Cost Item",filterable:{multi:!0,search:!0},width:200},{field:"costUnit",title:"Cost Unit",filterable:{multi:!0,search:!0},width:80},{field:"costSubItem",title:"Cost Sub Item",filterable:{multi:!0,search:!0},width:200},{field:"amount",title:"Amount",filterable:{multi:!0,search:!0},width:100,template:'#: kendo.toString(amount, "0.00") #'},{field:"unit",title:"Unit",filterable:{multi:!0,search:!0},width:100},{field:"unitCostInEuro",title:"Unit Cost In Euro",filterable:{multi:!0,search:!0},width:150,template:'#: kendo.toString(unitCostInEuro, "0.00") #'},{field:"totalCost",aggregates:["sum"],groupFooterTemplate:"TOTAL:  #\x3dkendo.toString(sum, '0.00')#",title:"Total Cost In Euro",filterable:{multi:!0,search:!0},width:200,template:'#: kendo.toString(totalCost, "0.00") #'},{field:"euroRate",title:"Euro Rate",filterable:{multi:!0,search:!0},width:100}]};a.searchReport=function(){console.log("in searchReport function");c.post("/report/api/sqp-report",a.searchParams).success(function(b){console.log("in searchReport function post success");null==b?(console.log("DATA NULL,loss-detail-report.js"),console.log(b)):(console.log("DATA not NULL,loss-detail-report.js"),console.log(b),a.sqpData.splice(0,a.sqpData.length),a.sqpData.push.apply(a.sqpData,b),a.sqpReportGrid.dataSource.data(a.sqpData))})}};sqpReportController.$inject="$scope $http tfContextRootService $translate $q commonDataSourceService commonSelectionOptions".split(" ");angular.module("ykyReportsApp").controller("sqpReportController",sqpReportController);

var commonTableOptions=function(a){return{toolbar:[{name:"excel",text:"Excel"}],excel:{allPages:!0,fileName:"YSKY - Press Rapor.xlsx",filterable:!0},autoBind:!1,dataSource:{type:"json",transport:{read:void 0},pageSize:15},resizable:!0,sortable:!0,columns:[{field:"id",title:"Kayıp ID",width:100},{field:"currentState",title:"Statü",width:100,template:function(b){return a.instant(b.currentState)}},{field:"supplier.firmType",title:"Firma Türü",template:function(b){return a.instant(b.firmType)},width:50},{field:"supplier.firmType",title:"Sorumlu Firma",template:function(a){return"FIRM"===a.firmType?a.supplier.sapCode+" - "+a.supplier.name:a.firmDescription},width:150},{field:"rollDetail.rollNo",title:"Rulo Numarası",width:100},{field:"rollDetail.part.disegno",title:"Resim No",width:100},{field:"rollDetail.disegnoDetail.forma",title:"Forma",width:100},{field:"rollDetail.disegnoDetail.quality",title:"Kalite",width:100},{field:"rollDetail.disegnoDetail.width",title:"Genişlik",width:100},{field:"rollDetail.disegnoDetail.thickness",title:"Kalınlık",width:100},{field:"rollDetail.rollWeight",title:"Rulo Ağırlık",width:100},{field:"rollDetail.invoiceNo",title:"Fatura No",width:100},{field:"rollDetail.shipName",title:"Gemi Adı",width:100},{field:"rollDetail.factoryEntranceDate",title:"Fabrika Giriş Tarihi",width:100},{field:"rollDetail.supplier.supplierCode",title:"Tedarikçi Firma",template:"#: rollDetail.supplier.supplierCode # - #: rollDetail.supplier.name #",width:150},{field:"rollDetail.notes",title:"Notlar",width:150}]}},pressReportService=function(a){return{getPressLosses:function(b,f,e,d,c){a.post(b,f).success(function(a){d&&e.splice(0,e.length);for(var b=0;b<a.length;b++)for(var f=a[b],h=0;h<f.details.length;h++){var k=f.details[h],g={};angular.extend(g,f);angular.extend(g,k);g.id=f.id;e.push(g)}c()})}}};pressReportService.$inject=["$http"];var pressQualityReportController=function(a,b,f,e){a.pressLosses=[];a.searchParams={};a.pressReportGridOptionsTmp={};angular.extend(a.pressReportGridOptionsTmp,commonTableOptions(f));a.pressReportGridOptionsTmp.columns.push.apply(a.pressReportGridOptionsTmp.columns,[{field:"qualityTraceId",title:"Kalite Takip ID",width:100},{field:"cutDate",title:"Kesim Tarihi",width:100},{field:"moldNo",title:"Kalıp No",width:100},{field:"reportDate",title:"Tutanak Tarihi",width:100},{field:"reportKeeper",title:"Tutanak Tutulan Kişi",width:100},{field:"rollScrapWeight",title:"Rulo Iskarta Ağırlık",width:100},{field:"cutScrapQty",title:"Kesili Iskarta Adet",width:100},{field:"cutPartBaseWeight",title:"Kesili Parça Birim Ağırlık",width:100},{field:"_cutPartWeight",title:"Kesili Parça Ağırlığı (Kesili Iskarta Adet * Kesili Parça Birim Ağırlık )",width:100},{field:"pressedScrapQty",title:"Basılı Iskarta Adet",width:100},{field:"pressedPartBaseWeight",title:"Basılı Parça Birim Ağırlık",width:100},{field:"_pressedPartWeight",title:"Basılı Parça Ağırlığı (Basılı Iskarta Adet * Basılı Parça Birim Ağırlık)",width:100},{field:"repairQty",title:"Tamir Adet",width:100},{field:"scrapSoldOut",title:"Fire Dış Firmaya Satılan",width:100},{field:"_totalScrap",title:"Fire Total (Kesili Parça Ağırlık + Basılı Parça Ağırlık + Rulo Iskarta Ağırlık)",width:100},{field:"_scrapHrd03",title:"Fire kg (HRD) (Fire Total - Fire Dış Firmaya Satılan)",width:100},{field:"scrapSalePrice",title:"Dış Firma Anlaşmalı Fire Satış Fiyatı",width:100,template:"\x3cspan style\x3d'float:right'\x3e#\x3d kendo.toString(scrapSalePrice, '0.00') # €\x3c/span\x3e"},{field:"scrapHrdParam",title:"Hurda Satış (HRD Parametresi)",width:100},{field:"disegnoBasePrice",title:"Malzeme Birim Fiyat (€/ton)",width:100,template:"\x3cspan style\x3d'float:right'\x3e#\x3d kendo.toString(disegnoBasePrice, '0.00') # €\x3c/span\x3e"},{field:"disegnoBasePriceDiff",title:"Malzeme Birim Fiyat Değişikliği (€/ton)",width:100,template:"\x3cspan style\x3d'float:right'\x3e#\x3d kendo.toString(disegnoBasePriceDiff, '0.00') # €\x3c/span\x3e"},{field:"customsCostParam",title:"Gümrük Masrafları Kat Sayısı",width:100,template:"\x3cspan style\x3d'float:right'\x3e#\x3d kendo.toString(disegnoBasePriceDiff, '0.00') # €\x3c/span\x3e"},{field:"_partCustomsBasePrice",title:"Malzeme Gümrüklü Birim Fiyat (€/ton) ((Malzeme Birim Fiyat + Malzeme Birim Fiyat Değişikliği) * Gümrük Masrafları Kat Sayısı)",width:100,template:"\x3cspan style\x3d'float:right'\x3e#\x3d kendo.toString(_partCustomsBasePrice, '0.00') # €\x3c/span\x3e"},{field:"logisticsLabourHrs",title:"Lojistik İşçiliği Saat",width:100},{field:"_logisticsLabourCost",title:"Lojistik İşçiliği Maliyeti",width:100,template:"\x3cspan style\x3d'float:right'\x3e#\x3d kendo.toString(_logisticsLabourCost, '0.00') # €\x3c/span\x3e"},{field:"productionLabourHrs",title:"Üretim İşçiliği Saat",width:100},{field:"_productionLabourCost",title:"Üretim İşçiliği Maliyeti",width:100,template:"\x3cspan style\x3d'float:right'\x3e#\x3d kendo.toString(_productionLabourCost, '0.00') # €\x3c/span\x3e"},{field:"_scrapPartCost",title:"Fire Malzeme Tutar (Fire Total * Malzeme Güm. Birim Fiyatı / 1000)",width:100,template:"\x3cspan style\x3d'float:right'\x3e#\x3d kendo.toString(_scrapPartCost, '0.00') # €\x3c/span\x3e"},{field:"_scrapCostDiscount",title:"Fire Maliyet İndirimi ((Fire HRD * Hurda Satış Parametresi) + (Fire Dış Firmaya Satılan * Dış Firma Fire Satış))",width:100,template:"\x3cspan style\x3d'float:right'\x3e#\x3d kendo.toString(_scrapCostDiscount, '0.00') # €\x3c/span\x3e"},{field:"logisticsCostParam",title:"Lojistik Maliyeti Parametresi",width:100},{field:"_logisticsCost",title:"Lojistik Maliyeti (Lojistik Maliyet Parametresi * Fire Total / 1000)",width:100,template:"\x3cspan style\x3d'float:right'\x3e#\x3d kendo.toString(_logisticsCost, '0.00') # €\x3c/span\x3e"},{field:"_totalCost",title:"Toplam Maliyet (Lojistik Maliyet + Üretim İşçilik Maliyet + Lojistik İşçilik Maliyet + Fire Malzeme Tutar - Hurda Tutar Maliyet İndirimi)",width:100,template:"\x3cspan style\x3d'float:right'\x3e#\x3d kendo.toString(_totalCost, '0.00') # €\x3c/span\x3e"},{field:"insertedBy",title:"Kayıp Bildiren Kişi",width:100},{field:"insertedDate",title:"Kayıp Bildirim Tarihi",width:150},{field:"sapOrderNo",title:"SAP Sipariş No",width:100},{field:"creditNote",title:"Dekont Numarası",width:100},{field:"creditNoteDate",title:"Dekont Tarihi",width:100},{field:"creditNoteAmount",title:"Dekont Tutar",width:100,template:"\x3cspan style\x3d'float:right'\x3e#\x3d kendo.toString(creditNoteAmount, '0.00') # €\x3c/span\x3e"},{field:"paymentMailDate",title:"Ödeme Bildirim Tarihi",width:100},{field:"paymentInformer",title:"Ödeme Bildiren Kişi",width:100}]);a.pressReportGridOptionsTmp.dataSource.transport.read=function(d){e.getPressLosses("/loss/press/report/api/quality",a.searchParams,a.pressLosses,!0,function(){d.success(a.pressLosses)})};a.pressReportGridOptions=a.pressReportGridOptionsTmp;a.search=function(){a.pressReportGrid.dataSource.read()}};pressQualityReportController.$inject=["$scope","$http","$translate","pressReportService"];var pressLogisticsReportController=function(a,b,f,e){a.pressLosses=[];a.searchParams={};a.pressReportGridOptionsTmp={};angular.extend(a.pressReportGridOptionsTmp,commonTableOptions(f));a.pressReportGridOptionsTmp.columns.push.apply(a.pressReportGridOptionsTmp.columns,[{field:"atrscField",title:"A/T/S/R/C",width:50},{field:"frmApprover",title:"Firmadan Teyid Veren Kişi",width:100},{field:"transportedFrom",title:"Nereden Sevk Edildiği",width:100},{field:"transportedTo",title:"Sevk Yeri",width:100},{field:"transportDate",title:"Sevk Tarihi",width:100},{field:"alternativePart.disegno",title:"Alternatif Resim No",width:100},{field:"altDisegnoDetail.thickness",title:"Alternatif Malzeme Kalınlık",width:100},{field:"altDisegnoSliceWidth",title:"Alternatif Malzeme Dilme Ölçüsü",width:100},{field:"altDisegnoDetail.quality",title:"Alternatif Malzeme Kalitesi",width:100},{field:"altDiscardReason",title:"Alternatif Iskarta Nedeni",width:100},{field:"rollTofasTransDate",title:"Rulo TOFAŞ Sevk Tarihi",width:100},{field:"_oKPartWeight",title:"Gelen OK Malzeme Ağırlık (Rulo Ağırlık * Alternatif Malzeme Dilme Ölçüsü / Genişlik)",width:100},{field:"_scrapWeight",title:"Iskarta Ağırlık (Rulo Ağırlık - Gelen OK Malzeme Ağırlık)",width:100},{field:"slicePerTonne",title:"Ton Başı Dilme",width:100},{field:"_calculatedInvoiceAmount",title:"Hesaplanan Fatura Tutar (Ton Başı Dilme * Rulo Ağırlık / 1000)",width:100,template:"\x3cspan style\x3d'float:right'\x3e#\x3d kendo.toString(_calculatedInvoiceAmount, '0.00') # €\x3c/span\x3e"},{field:"scrapHrdParam",title:"Hurda Satış (HRD Parametresi)",width:100},{field:"disegnoBasePrice",title:"Malzeme Birim Fiyat ($/ton)",width:100,template:"\x3cspan style\x3d'float:right'\x3e#\x3d kendo.toString(disegnoBasePrice, '0.00') # €\x3c/span\x3e"},{field:"disegnoBasePriceDiff",title:"Malzeme Birim Fiyat Değişikliği ($/ton)",width:100,template:"\x3cspan style\x3d'float:right'\x3e#\x3d kendo.toString(disegnoBasePriceDiff, '0.00') # €\x3c/span\x3e"},{field:"altDisegnoBasePrice",title:"Alternatif Malzeme Birim Fiyat ($/ton)",width:100,template:"\x3cspan style\x3d'float:right'\x3e#\x3d kendo.toString(altDisegnoBasePrice, '0.00') # €\x3c/span\x3e"},{field:"_usedPartPriceDifference",title:"Kullanılan Malzeme Fiyat Farkı ((Malzeme Birim Fiyat + Malzeme Birim Fiyat Değişimi - Alternatif Resim Fiyat) * Gelen OK Malzeme Ağırlık)",width:100,template:"\x3cspan style\x3d'float:right'\x3e#\x3d kendo.toString(_usedPartPriceDifference, '0.00') # €\x3c/span\x3e"},{field:"firmTransportationCost",title:"Lojistik Maliyeti",width:100,template:"\x3cspan style\x3d'float:right'\x3e#\x3d kendo.toString(firmTransportationCost, '0.00') # €\x3c/span\x3e"},{field:"warehouseCost",title:"Ardiye Maliyeti",width:100,template:"\x3cspan style\x3d'float:right'\x3e#\x3d kendo.toString(warehouseCost, '0.00') # €\x3c/span\x3e"},{field:"logisticsLabourHrs",title:"Lojistik İşçiliği Saat",width:100},{field:"_logisticsLabourCost",title:"Lojistik İşçiliği Maliyeti",width:100,template:"\x3cspan style\x3d'float:right'\x3e#\x3d kendo.toString(_logisticsLabourCost, '0.00') # €\x3c/span\x3e"},{field:"productionLabourHrs",title:"Üretim İşçiliği Saat",width:100},{field:"_productionLabourCost",title:"Üretim İşçiliği Maliyeti",width:100,template:"\x3cspan style\x3d'float:right'\x3e#\x3d kendo.toString(_productionLabourCost, '0.00') # €\x3c/span\x3e"},{field:"_scrapPartCost",title:"Fire Malzeme Tutar (Iskarta Ağırlık * Malzeme Birim Fiyat)",width:100,template:"\x3cspan style\x3d'float:right'\x3e#\x3d kendo.toString(_scrapPartCost, '0.00') # €\x3c/span\x3e"},{field:"_scrapCostDiscountPrice",title:"Fire Maliyet İndirimi (Iskarta Ağırlık * Hurda Satış Parametresi )",width:100,template:"\x3cspan style\x3d'float:right'\x3e#\x3d kendo.toString(_scrapCostDiscountPrice, '0.00') # €\x3c/span\x3e"},{field:"_totalCost",title:"Toplam Maliyet (Lojistik Maliyeti + Kul. Malz. Fiy. Farkı + Hesaplanan Fatura Tutar + Üretim İşçilik Maliyet + Lojistik İşçilik Maliyet + Hurda Malzeme Maliyeti - Hurda Maliyet İndirim Tutarı)",width:100,template:"\x3cspan style\x3d'float:right'\x3e#\x3d kendo.toString(_totalCost, '0.00') # €\x3c/span\x3e"},{field:"insertedBy",title:"Kayıp Bildiren Kişi",width:100},{field:"insertedDate",title:"Kayıp Bildirim Tarihi",width:150},{field:"sapOrderNo",title:"SAP Sipariş No",width:100},{field:"creditNote",title:"Dekont Numarası",width:100},{field:"creditNoteDate",title:"Dekont Tarihi",width:100},{field:"creditNoteAmount",title:"Dekont Tutar",width:100,template:"\x3cspan style\x3d'float:right'\x3e#\x3d kendo.toString(creditNoteAmount, '0.00') # €\x3c/span\x3e"},{field:"paymentMailDate",title:"Ödeme Bildirim Tarihi",width:100},{field:"paymentInformer",title:"Ödeme Bildiren Kişi",width:100}]);a.pressReportGridOptionsTmp.dataSource.transport.read=function(d){e.getPressLosses("/loss/press/report/api/logistics",a.searchParams,a.pressLosses,!0,function(){d.success(a.pressLosses)})};a.pressReportGridOptions=a.pressReportGridOptionsTmp;a.search=function(){a.pressReportGrid.dataSource.read()}};pressLogisticsReportController.$inject=["$scope","$http","$translate","pressReportService"];var pressDetailsReportController=function(a,b,f,e){a.pressLosses=[];a.searchParams={};a.pressReportGridOptionsTmp={};angular.extend(a.pressReportGridOptionsTmp,commonTableOptions(f));a.pressReportGridOptionsTmp.columns.push.apply(a.pressReportGridOptionsTmp.columns,[{field:"scrapHrdParam",title:"Hurda Satış (HRD Parametresi)",width:100},{field:"logisticsLabourHrs",title:"Lojistik İşçiliği Saat",width:100},{field:"_logisticsLabourCost",title:"Lojistik İşçiliği Maliyeti",width:100,template:"\x3cspan style\x3d'float:right'\x3e#\x3d kendo.toString(_logisticsLabourCost, '0.00') # €\x3c/span\x3e"},{field:"productionLabourHrs",title:"Üretim İşçiliği Saat",width:100},{field:"_productionLabourCost",title:"Üretim İşçiliği Maliyeti",width:100,template:"\x3cspan style\x3d'float:right'\x3e#\x3d kendo.toString(_productionLabourCost, '0.00') # €\x3c/span\x3e"},{field:"_totalCost",title:"Toplam Maliyet",width:100,template:"\x3cspan style\x3d'float:right'\x3e#\x3d kendo.toString(_totalCost, '0.00') # €\x3c/span\x3e"},{field:"insertedBy",title:"Kayıp Bildiren Kişi",width:100},{field:"insertedDate",title:"Kayıp Bildirim Tarihi",width:150},{field:"sapOrderNo",title:"SAP Sipariş No",width:100},{field:"creditNote",title:"Dekont Numarası",width:100},{field:"creditNoteDate",title:"Dekont Tarihi",width:100},{field:"creditNoteAmount",title:"Dekont Tutar",width:100,template:"\x3cspan style\x3d'float:right'\x3e#\x3d kendo.toString(creditNoteAmount, '0.00') # €\x3c/span\x3e"},{field:"paymentMailDate",title:"Ödeme Bildirim Tarihi",width:100},{field:"paymentInformer",title:"Ödeme Bildiren Kişi",width:100}]);a.pressReportGridOptionsTmp.dataSource.transport.read=function(d){a.pressLosses.splice(0,a.pressLosses.length);a.searchParams.pressLossType&&"QUALITY"!=a.searchParams.pressLossType?a.searchParams.pressLossType&&"LOGISTICS"!=a.searchParams.pressLossType?d.success([]):e.getPressLosses("/loss/press/report/api/logistics",a.searchParams,a.pressLosses,!1,function(){d.success(a.pressLosses)}):e.getPressLosses("/loss/press/report/api/quality",a.searchParams,a.pressLosses,!1,function(){a.searchParams.pressLossType&&"LOGISTICS"!=a.searchParams.pressLossType?d.success(a.pressLosses):e.getPressLosses("/loss/press/report/api/logistics",a.searchParams,a.pressLosses,!1,function(){d.success(a.pressLosses)})})};a.pressReportGridOptions=a.pressReportGridOptionsTmp;a.search=function(){a.pressReportGrid.dataSource.read()}};pressDetailsReportController.$inject=["$scope","$http","$translate","pressReportService"];var pressReportsSearchParamsDirective=function(){return{restrict:"AE",replace:!0,scope:{searchParams:"\x3dsearchParams",searchFunc:"\x26",isDetails:"\x3disDetails"},templateUrl:"/ng/view/yky/report/press/search-params.html",controller:pressReportsSearchParamsDirectiveController}},pressReportsSearchParamsDirectiveController=function(a,b){a.lossStates=["OPEN","PRESS_CLOSED","CANCELED"];a.pressLossTypes=["QUALITY","LOGISTICS"];a.pressSuppliers=b.getPressSuppliers()};pressReportsSearchParamsDirectiveController.$inject=["$scope","commonDataSourceService"];var pressDashboardController=function(a,b,f){a.data=[];a.filteredData=new kendo.data.ObservableArray([]);a.pieChartData=new kendo.data.ObservableArray([]);a.years=new kendo.data.ObservableArray([]);a.suppliers=new kendo.data.ObservableArray([]);a.selectedYears=[];a.selectedSuppliers=[];b.get("/loss/press/report/api/dashboard").success(function(e){a.data=e;a.years.empty();a.filteredData.empty();for(var d=0;d<e.length;d++){var c=e[d];c.yearAsDate=new Date(c.year,1,1,1,1,1,1);c.balance=c.totalCost-c.supplierPayment;0>a.years.indexOf(c.year)&&(a.years.push(c.year),a.selectedYears.push(c.year));0>a.selectedSuppliers.indexOf(c.supplierCode)&&(a.selectedSuppliers.push(c.supplierCode),a.suppliers.push({supplierCode:c.supplierCode,supplierLabel:c.supplierCode+"-"+c.supplierName}))}a.refreshFilteredData(!0)});a.refreshFilteredData=function(e){a.filteredData.empty();for(var d=[],c=0;c<a.data.length;c++){var b=a.data[c];0<=a.selectedYears.indexOf(b.year)&&0<=a.selectedSuppliers.indexOf(b.supplierCode)&&d.push(b)}a.pieChartData.empty();c=new kendo.data.DataSource({data:d,group:{field:"supplierName",aggregates:[{field:"balance",aggregate:"sum"}]}});c.read();c=c.view();for(b=0;b<c.length;b++)a.pieChartData.push({supplierName:c[b].value,balance:c[b].aggregates.balance.sum});a.filteredData.push.apply(a.filteredData,d);e||a.$apply()};a.yearsOptions={dataSource:{data:a.years},change:function(b){a.refreshFilteredData(!1)}};a.supplierOptions={dataTextField:"supplierLabel",dataValueField:"supplierCode",valuePrimitive:!0,dataSource:{data:a.suppliers},change:function(b){a.refreshFilteredData(!1)}};a.lineChartOptions={theme:"bootstrap",title:{text:"Yıllar İçinde Değişim"},legend:{position:"right"},dataSource:{data:a.filteredData,group:{field:"supplierName"}},series:[{name:"Toplam Tutar",type:"line",style:"smooth",field:"totalCost",axis:"costAxis",tooltip:{format:"{0:n2} €",visible:!0}},{name:"Bakiye",type:"column",field:"balance",axis:"balanceAxis",tooltip:{format:"{0:n2} €",visible:!0}}],valueAxes:[{name:"costAxis",title:{text:f.instant("totalCost")}},{name:"balanceAxis",title:{text:f.instant("balance")}}],categoryAxis:{field:"yearAsDate",type:"date",baseUnit:"years",labels:{dateFormats:{years:"yyyy"},visible:!0},axisCrossingValues:[0,10]}};a.pieChartOptions={theme:"bootstrap",legend:{visible:!1},title:{text:"Bakiye Dağılımı"},dataSource:{data:a.pieChartData},series:[{type:"pie",field:"balance",categoryField:"supplierName",aggregate:"sum",labels:{visible:!0,background:"transparent",template:"#\x3d category #:  %#\x3d kendo.toString(percentage*100, 'n1')#  #\x3d kendo.toString(value, 'n2')# €"}}]}};pressDashboardController.$inject=["$scope","$http","$translate"];angular.module("pressReportControllers",[]).service("pressReportService",pressReportService).controller("pressLogisticsReportController",pressLogisticsReportController).controller("pressQualityReportController",pressQualityReportController).controller("pressDetailsReportController",pressDetailsReportController).controller("pressReportsSearchParamsDirectiveController",pressReportsSearchParamsDirectiveController).directive("pressReportsSearchParams",pressReportsSearchParamsDirective).controller("pressDashboardController",pressDashboardController);

angular.module("ykyDashboardApp",["ykyDashboardControllers"]).config(["$stateProvider",function(a){a.state("home",{url:"/",templateUrl:"/ng/view/home.html",controller:"ykyDashboardController",ncyBreadcrumb:{label:"YKY"}})}]);

var ykyDashboardController=function(b,p,k,v,q){b.annualStatusBasedOptions=void 0;b.quarterStatusBasedOptions=void 0;b.monthStatusBasedOptions=void 0;var r="TFG_YKY_ADMIN TFG_YKY_BUYER TFG_YKY_REF TFG_YKY_LC_PRODUCTION TFG_YKY_DURATION_DEF TFG_YKY_PRESS_USER TFG_YKY_REPORT TFG_YKY_DEVELOPER TFG_YKY_LC_LOGISTICS TFG_YKY_APPROVAL_QUALITY TFG_YKY_APPROVAL_LOGISTICS TFG_YKY_LC_QUALITY TFG_YKY_LC_QUALITY_LAB".split(" ");b.canSeeCharts=function(){return q.hasAnyRole(r)};var t=function(a,b,c,e){var d="#\x3d kendo.toString(value, 'n') # ₺";e||(d="#\x3d kendo.toString(value, 'n0') # (dk)");a={theme:"bootstrap",title:{text:a},legend:{visible:!1,position:"bottom"},seriesDefaults:{type:"column"},series:[],valueAxis:{minorGridLines:{visible:!0},labels:{template:d}},categoryAxis:{categories:[],labels:{rotation:"auto"}},tooltip:{visible:!0,template:d}};c&&(a.seriesDefaults.stack=!0);b?a.tooltip.template=d:(a.tooltip.template=e?function(a){return a.series.name+": "+kendo.toString(a.value,"n")+" ₺"}:function(a){return a.series.name+": "+kendo.toString(a.value,"n0")+" (dk)"},a.legend.visible=!0);return a},u=function(a){var b=[],c=[];angular.forEach(a,function(a,d){b.push(a.paramValue);c.push(a.paramSubName);c[d]=k.instant(a.paramSubName)});return{seriesData:[{name:"Durum Bazlı",data:b}],categories:c}},l=function(a){var b=[],c=[];angular.forEach(a,function(a,e){0>b.indexOf(a.paramName)&&b.push(a.paramName);0>c.indexOf(a.paramSubName)&&c.push(a.paramSubName)});b.sort();c.sort();var e=[];angular.forEach(c,function(c,d){e[d]={};e[d].name=c;e[d].data=[];k(c).then(function(a){e[d].name=a?a:c});angular.forEach(b,function(b,n){e[d].data[n]=0;angular.forEach(a,function(a,g){if(a.paramName===b&&a.paramSubName===c){var f=a.paramValue.toFixed(2);e[d].data[n]=+f}})})});var d=[];angular.forEach(b,function(a,b){d[b]=k.instant(a)});return{seriesData:e,categories:d}},m=function(a){a.url="/api/dashboard/get-data/"+a.url;p.get(a.url).success(function(b){b=a.dataMapFunction(b);var c=t(a.title,a.withFormatted,a.isStacked,a.isCost);c.series=b.seriesData;c.categoryAxis.categories=b.categories;a.callback(c)})},g=function(a,b,c){m({url:a+"/STATUS_BASED",dataMapFunction:b?u:l,title:b?"Durum Bazlı Toplam Tutarlar":"Durum Bazlı Toplam Süreler",withFormatted:b,isStacked:!b,isCost:b,callback:c})},f=function(a,b,c){m({url:a+"/LOSS_BASED",dataMapFunction:l,title:b?"Kayıp/Statü Bazlı Toplam Tutarlar":"Kayıp/Statü Bazlı Toplam Süreler",withFormatted:!1,isStacked:!0,isCost:b,callback:c})},h=function(a,b,c){m({url:a+"/SUPPLIER_BASED",dataMapFunction:l,title:b?"Tedarikçi/Tutar Türü Bazlı Toplam Tutarlar":"Tedarikçi/Tutar Türü Bazlı Toplam Süreler",withFormatted:!1,isStacked:!0,isCost:b,callback:c})};b.getAnnualData=function(){b.annualStatusBasedOptions||(g("YEAR",!0,function(a){b.annualStatusBasedOptions=a}),f("YEAR",!0,function(a){b.annualLossBasedOptions=a}),h("YEAR",!0,function(a){b.annualSupplierBasedOptions=a}),g("YEAR_DURATION",!1,function(a){b.annualStatusBasedDurationOptions=a}),f("YEAR_DURATION",!1,function(a){b.annualLossBasedDurationOptions=a}),h("YEAR_DURATION",!1,function(a){b.annualSupplierBasedDurationOptions=a}))};b.getQuarterData=function(){b.quarterStatusBasedOptions||(g("QUARTER",!0,function(a){b.quarterStatusBasedOptions=a}),f("QUARTER",!0,function(a){b.quarterLossBasedOptions=a}),h("QUARTER",!0,function(a){b.quarterSupplierBasedOptions=a}),g("QUARTER_DURATION",!1,function(a){b.quarterStatusBasedDurationOptions=a}),f("QUARTER_DURATION",!1,function(a){b.quarterLossBasedDurationOptions=a}),h("QUARTER_DURATION",!1,function(a){b.quarterSupplierBasedDurationOptions=a}))};b.getMonthData=function(){b.monthStatusBasedOptions||(g("MONTH",!0,function(a){b.monthStatusBasedOptions=a}),f("MONTH",!0,function(a){b.monthLossBasedOptions=a}),h("MONTH",!0,function(a){b.monthSupplierBasedOptions=a}),g("MONTH_DURATION",!1,function(a){b.monthStatusBasedDurationOptions=a}),f("MONTH_DURATION",!1,function(a){b.monthLossBasedDurationOptions=a}),h("MONTH_DURATION",!1,function(a){b.monthSupplierBasedDurationOptions=a}))}};ykyDashboardController.$inject=["$scope","$http","$translate","$filter","tfAuthService"];angular.module("ykyDashboardControllers",[]).controller("ykyDashboardController",ykyDashboardController);

angular.module("ykyHomeApp","ncy-angular-breadcrumb ngMessages tfCommonModule tfDeveloperApp tfAdminApp tfAnnouncementApp ykyLossApp ykyBuyerApp ykySupplierApp ykyRefreeApp ykyReportsApp ykyDashboardApp datatables".split(" ")).config(["$stateProvider","$urlRouterProvider","$breadcrumbProvider",function(a,e,c){e.otherwise("/");c.setOptions({prefixStateName:"home",templateUrl:"/ng/view/common/breadcrumb.html"})}]).run(["$rootScope","$http",function(a,e){setInterval(function(){e.get("/common/api/heart-beat").success(function(b){console.log("alive")})},6E5);a.currentYear=(new Date).getFullYear();var c=void 0;a.sqp={messages:{sqpRule1:"SQP numarası 13 hane ve ilk 4 hanesi 2009 ile "+a.currentYear+" aralığında olmalıdır!",required:"Boş bırakılamaz",min:"En az {1} veya daha fazla olmalı",discardedPartCanNotBeSame:"Iskarta parça ile kayıp yaşanan parça aynı olamaz"},rules:{sqpRule1:function(b){if(b.is("[name\x3dsqpno]")){b=b.val();var d;if(b){if(d=0==b.toString().length||13===b.toString().length)b=b.toString().substr(0,4),d=2009<=+b&&+b<=a.currentYear;if(!d)return!1}}return!0},discardedPartCanNotBeSame:function(b){b.is("[name\x3dpart]")&&(c=b.val());return b.is("[data-discarded-part\x3dtrue]")&&(b=b.val(),c==b)?!1:!0}}}}]).directive("tfSqpNo",["$compile",function(a){return{restrict:"A",require:"ngModel",link:function(a,c,b,d){a.$watch(b.ngModel,function(a){var f=!a;if(!f)if(f=0==a.toString().length||13===a.toString().length){var e=(new Date).getFullYear();a=a.toString().substr(0,4);(f=2009<=+a&&+a<=e)||c[0].setCustomValidity("SQP Numarasının ilk 4 hanesi 2009 veya "+
e+" aralığında olmalıdır.")}else c[0].setCustomValidity("SQP Numarası 13 hane olmalı");f&&c[0].setCustomValidity("");d.$setValidity(b.ngModel,f)})}}}]).directive("tfHideIfSupplier",["tfAuthService",function(a){return{restrict:"EA",link:function(e,c,b){e.$watch(function(){return a.getRoles()},function(b,e){a.hasAnyRole("TFG_YKY_BUYER TFG_YKY_REF TFG_YKY_LC_PRODUCTION TFG_YKY_REPORT TFG_YKY_LC_LOGISTICS TFG_YKY_APPROVAL_QUALITY TFG_YKY_APPROVAL_LOGISTICS TFG_YKY_LC_QUALITY TFG_YKY_LC_QUALITY_LAB".split(" "))?c.show():c.hide()})}}}]).directive("tfIsSupplierUser",["tfAuthService",function(a){return{restrict:"EA",link:function(e,c,b){e.$watch(function(){return a.getUserName()},function(b,e){var f=a.getUserName();f&&0<f.length&&"S"==f.charAt(0)?c.show():c.hide()})}}}]).filter("tfTryCurrency",function(){return function(a){return isNaN(a)?a:kendo.toString(a,"n2")+" ₺"}}).filter("tfEurCurrency",function(){return function(a){return isNaN(a)?a:kendo.toString(a,"n2")+" €"}}).directive("tfOption",[function(){return{require:"^tfSelect",restrict:"E",replace:!0,scope:{},link:function(a,e,c,b,d){a.value=c.value;a.text=c.text;a.selectElement=function(a,d){b.selectElement(a,d)};a.isItemSelected=function(a){return b.isItemSelected(a)}},template:'\x3cli data-value\x3d"{{value}}"\x3e\x3ca ng-click\x3d"selectElement(value, text)"\x3e\x3cspan class\x3d"glyphicon glyphicon-ok" ng-show\x3d"isItemSelected(value)"\x3e\x3c/span\x3e\x26nbsp;{{text}}\x3c/a\x3e\x3c/li\x3e'}}]).directive("tfSelect",[function(){return{restrict:"E",transclude:!0,scope:{filterParam:"\x3d",multiple:"\x3d?",tfModel:"\x3d"},controller:function(a,e,c){e.find("span").replaceWith(c());var b=this;b.selectedElements={};b.selectElement=function(d,c){a.isMultiple()?void 0!=b.selectedElements[d]?(delete b.selectedElements[d],a.tfModel.splice(a.tfModel.indexOf(d),1)):(b.selectedElements[d]=c,a.tfModel.push(d)):b.selectedElements[d]==c?(b.selectedElements=[],a.tfModel=void 0):(b.selectedElements=[],b.selectedElements[d]=c,a.tfModel=d)};b.isItemSelected=function(a){return void 0!=b.selectedElements[a]};a.getSelectedText=function(){if(0==Object.keys(b.selectedElements).length)return"Please select";if(1==Object.keys(b.selectedElements).length){var a="",c;for(c in b.selectedElements)a+=b.selectedElements[c];return a}return Object.keys(b.selectedElements).length+" selected."};a.isMultiple=function(){return a.multiple};void 0==a.tfModel&&a.isMultiple()&&(a.tfModel=[])},template:'\x3cdiv class\x3d"dropdown" style\x3d"width: %100;"\x3e\x3cbutton class\x3d"btn btn-default dropdown-toggle" type\x3d"button" id\x3d"dropdownMenu1"       data-toggle\x3d"dropdown" aria-haspopup\x3d"true" aria-expanded\x3d"true"\x3e{{getSelectedText()}}    \x3cspan class\x3d"caret"\x3e\x3c/span\x3e \x3c/button\x3e \x3cul class\x3d"dropdown-menu" aria-labelledby\x3d"dropdownMenu1"\x3e   \x3cli\x3e\x3cinput type\x3d"text" ng-model\x3d"filterParam" class\x3d"form-control" /\x3e\x3c/li\x3e \x3cspan\x3e\x3c/span\x3e   \x3c/ul\x3e'}}]);
